!function(e,t){"function"==typeof define&&define.amd?define(["angular","less"],t):t(e.angular,e.less)}(this,function(e,t){var n=e.module("ngLess",[]);n.factory("styles",[function(){return[]}]),n.directive("head",["styles","$compile","$interpolate",function(e,t,n){return{restrict:"E",link:function(r,s){r.styles=e;var i='<style ng-repeat="style in styles">{{style.css}}</style>';i=i.replace("{{",n.startSymbol()),i=i.replace("}}",n.endSymbol()),s.append(t(i)(r))}}}]),n.directive("link",["styles","$http",function(e,n){return{restrict:"E",link:function(r,s){if("stylesheet/less"===s.attr("rel")&&s.attr("href")){var i;s.on("$destroy",function(){return i?(e.splice(e.indexOf(i),1),void r.$apply()):void console.log("no style")}),n.get(s.attr("href")).then(function(e){if(!s.parent().length)throw new Error("Element was removed.");return t.render(e.data)}).then(function(t){if(!s.parent().length)throw new Error("Element was removed.");i={css:t.css},e.push(i)})["catch"](function(e){if("Element was removed."!==e.message)throw e})}}}}])});