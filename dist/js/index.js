"use strict";var APP=angular.module("app",["ui.router","ngScrollbars","ngCookies","validation","moment-picker","LocalStorageModule","cp.ngConfirm"]);APP.constant("loginMode",{NAME:"LOGINMODE",RESULT:"success"}),APP.run(["$rootScope","$log","$timeout","loginMode","$state","$stateParams",function(t,e,n,o,i,r){t.$state=i,t.$stateParams=r,t.$on("LocalStorageModule.notification.setitem",function(t,n){n&&n.key==o.NAME&&e.info("用户正在尝试登陆")}),t.$on("LocalStorageModule.notification.removeitem",function(t,n){n&&n.key==o.NAME&&e.info("用户正在退出登陆")})}]),APP.run(["$rootScope",function(t){t.colors={white:"#FFF",main:"#366092",tableBg:"#f0f4fa",tableBorder:"#bfbfbf",tableInsideBorder1:"#d9d9d9",tableInsideBorder2:"#e8e8e8",menuSecond:"#373d41",menuSelected:"#95b3d7",font1:"#366092",font2:"#5385c1",font3:"#ff0000",font4:"#000000",font5:"#333333",font6:"#808080"},t.fontZize={big:"16px",middleBig:"14px",middleSmall:"13px",small:"12px"}}]),APP.config(["localStorageServiceProvider",function(t){t.setPrefix("XIZHUOKEJI").setStorageType("sessionStorage").setNotify(!0,!0)}]),APP.config(["momentPickerProvider",function(t){t.options({locale:"en",format:"L LTS",minView:"decade",maxView:"minute",startView:"year",autoclose:!0,today:!1,keyboard:!1,leftArrow:"&larr;",rightArrow:"&rarr;",yearsFormat:"YYYY",monthsFormat:"MMM",daysFormat:"D",hoursFormat:"HH:[00]",minutesFormat:moment.localeData().longDateFormat("LT").replace(/[aA]/,""),secondsFormat:"ss",minutesStep:5,secondsStep:1})}]),APP.config(["$qProvider",function(t){}]),APP.config(["$sceDelegateProvider",function(t){t.resourceUrlWhitelist(["*://localhost:8080/**","self"])}]),APP.config(["$stateProvider","$urlRouterProvider",function(t,e){t.state("login",{url:"/login",templateUrl:"script/platform/component/login/login.html",controller:"loginCtrl"}).state("home",{url:"/home",templateUrl:"script/platform/component/home/home.html",controller:"homeCtrl"}).state("home.main",{url:"/main",templateUrl:"script/platform/component/home/main/main.html",controller:"mainCtrl"}).state("home.organization",{url:"/organization",templateUrl:"script/platform/component/home/organization/organization.html",controller:"organizationCtrl"}),e.otherwise("login")}]),APP.config(["ScrollBarsProvider",function(t){t.defaults={autoHideScrollbar:!1,setHeight:"100%",scrollInertia:500,axis:"yx",theme:"minimal-dark",advanced:{updateOnContentResize:!0},scrollButtons:{scrollAmount:"auto",enable:!1}}}]),APP.config(["$validationProvider",function(t){var e={phone:/^1[\d]{10}/,password:function(t){return t>5}},n={phone:{success:"",error:"必须是11位手机号"},password:{success:"",error:" 长度至少6位"}};t.setExpression(e).setDefaultMsg(n)}]),APP.service("cache",["$cookies",function(t){this.put=function(e,n){t.put(e,n)},this.get=function(e){return t.get(e)},this.remove=function(e){t.remove(e)}}]),APP.service("$myHttp",["$rootScope","$filter","$http","$timeout","$q",function(t,e,n,o,i){this.getData=function(t,e,o){$.isFunction(o)&&o();var r=i.defer();return n({mehtod:"POST",url:t,data:e,headers:{"Content-Type":void 0}}).then(function(t){r.resolve(t)}).catch(function(t){r.reject(t)}),r.promise},this.getDataByGet=function(t,e,o){$.isFunction(o)&&o();var r=i.defer();return n.get(t,{params:e}).then(function(t){r.resolve(t)}).catch(function(t){r.reject(t)}),r.promise},this.getDataByJsonp=function(t,e,o,r){$.isFunction(r)&&r();i.defer();n.jsonp(t,{params:e,jsonpCallbackParam:o||"callback"}).then(function(t){def.resolve(t)}).catch(function(t){def.reject(t)})}}]),APP.service("uuid",["$rootScope","$filter","$http","$timeout","$q",function(t,e,n,o,i){return{getUUID:function(){var t=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:3&n|8).toString(16)})}}}]),$.extend({getRandom:function(){var t=Math.random()+"";return t=t.split(".")[1]}}),APP.controller("indexCtrl",["$timeout","$log","$scope","localStorageService","$rootScope","$state","loginMode","$ngConfirm",function(t,e,n,o,i,r,a,l){o.get(a.NAME)!=a.RESULT&&r.go("login",{},{location:"replace"})}]),APP.directive("appColor",[function(){return{scope:{},restrict:"A",link:function(t,e,n,o){function i(t,o){var i,r=n.defaultColor?n.defaultColor+" !important":n.defaultColor,a=n.positiveColor?n.positiveColor+" !important":n.positiveColor,l=n.negativeColor?n.negativeColor+" !important":n.negativeColor,c=n.zeroColor?n.zeroColor+" !important":n.zeroColor,s=n.target;i=void 0!=s?s:$(e)[0].innerHTML.replace(/,/g,""),isNaN(parseFloat(i))?e.css("cssText","color:"+r):(0==i&&(c?e.css("cssText","color:"+c):a?e.css("cssText","color:"+a):e.css("cssText","color:"+r)),i>0&&(a?e.css("cssText","color:"+a):e.css("cssText","color:"+r)),i<0&&(l?e.css("cssText","color:"+l):e.css("cssText","color:"+r)))}void 0!=n.target?t.$watch(function(){return n.target},function(t,e){i(t,e)}):t.$watch(function(){return e[0].innerHTML},function(t,e){i(t,e)})}}}]),APP.directive("appCountHead",["$timeout","uuid",function(t,e){return{templateUrl:"script/common/directive/countHead/countHead.html?t="+e.getUUID(),scope:{height:"@"},transclude:!0,restrict:"E",controller:["$scope",function(t){}],link:function(t,e,n,o){t.height||(t.height="28px")}}}]),APP.directive("appCurrency",["$filter","$browser",function(t,e){return{require:"ngModel",link:function(n,o,i,r){var a={thousands:t("number")(1e3).substr(1,1),decimal:t("number")(1.1).substr(1,1)},l=!1,c=i.bit||2;r.$parsers.push(function(t){return i.isF&&t>0&&(t=-t),t+"".split(a.thousands).join("").split(a.decimal).join(".")}),r.$render=function(){o.val(t("number")((r.$viewValue+"").replace(/,/g,""),c,!1))};var s=function(){var e=o.val().split(a.thousands).join("").split(a.decimal).join(".");l?l=!1:(i.isF&&e>0&&(e=-e),o.val(t("number")(e,c)))};o.bind("focus",function(){if(!i.readonly&&"true"!=i.readonly){var t=r.$modelValue;if(!angular.isUndefined(t)){var e=t.toString().replace(/,/g,"");0==parseFloat(e)&&(e=""),o.val(e)}}}),o.bind("blur",function(){s()}),o.bind("keypress",function(t){var e=t.which;0==e||8==e||15<e&&e<19||37<=e&&e<=40||(String.fromCharCode(e)==a.thousands||String.fromCharCode(e)==a.decimal||48<=e&&e<=57||"-"==String.fromCharCode(e)?String.fromCharCode(e)==a.decimal&&(l=!0):t.preventDefault())}),o.bind("paste cut",function(){e.defer(s)})}}}]),APP.directive("script",[function(){return{restrict:"E",scope:!1,link:function(t,e,n){if("text/javascript-lazy"===n.type){var o=document.createElement("script");o.type="text/javascript";var i=e.attr("src");if(void 0!==i)o.src=i;else{var r=e.text();o.text=r}document.head.appendChild(o),e.remove()}}}}]),APP.directive("appLeftRightLayout",["$timeout","uuid",function(t,e){return{templateUrl:"script/common/directive/leftRightLayout/leftRightLayout.html?t="+e.getUUID(),scope:{width:"@",height:"@",clazz:"@class",leftWidth:"@",leftStyle:"@",rightStyle:"@",centerStyle:"@",centerWidth:"@",centerIconStyle:"@"},replace:!0,transclude:{left:"?left",right:"?right"},restrict:"E",controller:["$scope",function(t){}],link:function(n,o,i,r){n.id="lrc-containerd-"+e.getUUID(),n.curIsShowLeft=!0,n.leftWidthBak=n.leftWidth;var a="glyphicon glyphicon-triangle-left";n.centerIcon=a,n.height||(n.height="100%"),n.width||(n.width="100%"),n.class||(n.class=""),n.leftWidth?(console.log(parseFloat(n.leftWidth)+10+"px"),n.leftWidth=parseFloat(n.leftWidth)+10+"px"):n.leftWidth="50%",angular.isDefined(n.leftStyle)||(n.leftStyle=""),angular.isDefined(n.rightStyle)||(n.rightStyle=""),angular.isDefined(n.centerStyle)||(n.centerStyle=""),angular.isDefined(n.centerWidth)||(n.centerWidth="13.6px"),angular.isDefined(n.centerIconStyle)||(n.centerIconStyle=""),o.find("left,right").addClass("h-100 w-100 d-ib"),$(".lrl-centerBtn").on("click",function(){n.curIsShowLeft?(n.curIsShowLeft=!1,$("#a"+n.id).animate({width:0}),$("#b"+n.id).animate({"margin-left":0}),n.leftWidth=0,t(function(){n.$apply(function(){n.centerIcon="glyphicon glyphicon-triangle-right"})},0)):(n.curIsShowLeft=!0,$("#b"+n.id).animate({"margin-left":n.leftWidthBak}),$("#a"+n.id).animate({width:n.leftWidthBak}),n.leftWidth=n.leftWidthBak,t(function(){n.$apply(function(){n.centerIcon=a})},0))})}}}]),APP.directive("appPagePanel",["$timeout","uuid",function(t,e){return{templateUrl:"script/common/directive/pagePanel/pagePanel.html?t="+e.getUUID(),scope:{header:"@",width:"@",height:"@",headStyle:"@",textAlign:"@",borderBottom:"@border",leftBtnIcon:"@",clazz:"@class",callback:"&"},transclude:!0,restrict:"E",controller:["$scope",function(t){}],link:function(n,o,i,r){n.id="lrc-containerd-"+e.getUUID(),(!n.textAlign||"left"!=n.textAlign&&"center"!=n.textAlign&&"right"!=n.textAlign)&&(n.textAlign="center"),n.header||(n.header=""),n.height||(n.height="100%"),n.width||(n.width="100%"),n.headStyle||(n.headStyle="1"),n.borderBottom||(n.borderBottom="2px solid #A6A6A6"),n.leftBtnIcon||(n.leftBtnIcon="glyphicon glyphicon-menu-hamburger"),n.clazz||(n.clazz=""),n.showPanel=function(){o.find("#visiblePanel").removeClass("d-n").addClass("d-b")},n.hidePanel=function(){o.find("#visiblePanel").removeClass("d-b").addClass("d-n")},o.on("click"," .leftBtnIcon",function(){angular.isFunction(n.callback)&&n.callback()}),n.change=function(){t(function(){console.log(1111),n.$apply(function(){n.panel2=""})},2e3)}}}}]),APP.directive("appRightLeftLayout",["$timeout","uuid",function(t,e){return{templateUrl:"script/directive/leftRightLayout/rightLeftLayout.html ?t="+e.getUUID(),scope:{width:"@",height:"@",clazz:"@class",leftWidth:"@",leftStyle:"@",rightStyle:"@",centerStyle:"@",centerWidth:"@",centerIconStyle:"@"},replace:!0,transclude:{left:"?left",right:"?right"},restrict:"E",controller:["$scope",function(t){}],link:function(n,o,i,r){n.id="lrc-containerd-"+e.getUUID(),n.curIsShowLeft=!0,n.leftWidthBak=n.leftWidth;var a="glyphicon glyphicon-triangle-left";n.centerIcon=a,n.height||(n.height="100%"),n.width||(n.width="100%"),n.class||(n.class=""),n.leftWidth?(console.log(parseFloat(n.leftWidth)+10+"px"),n.leftWidth=parseFloat(n.leftWidth)+10+"px"):n.leftWidth="50%",angular.isDefined(n.leftStyle)||(n.leftStyle=""),angular.isDefined(n.rightStyle)||(n.rightStyle=""),angular.isDefined(n.centerStyle)||(n.centerStyle=""),angular.isDefined(n.centerWidth)||(n.centerWidth="13.6px"),angular.isDefined(n.centerIconStyle)||(n.centerIconStyle=""),o.find("left,right").addClass("h-100 w-100 d-ib"),$(".lrl-centerBtn").on("click",function(){n.curIsShowLeft?(n.curIsShowLeft=!1,$("#a"+n.id).animate({width:0}),$("#b"+n.id).animate({"margin-left":0}),n.leftWidth=0,t(function(){n.$apply(function(){n.centerIcon="glyphicon glyphicon-triangle-right"})},0)):(n.curIsShowLeft=!0,$("#a"+n.id).animate({width:n.leftWidthBak}),$("#b"+n.id).animate({"margin-left":n.leftWidthBak}),n.leftWidth=n.leftWidthBak,t(function(){n.$apply(function(){n.centerIcon=a})},0))})}}}]),APP.directive("appScrollLoad",["$myHttp","$log","uuid",function(t,e,n){return{template:"",scope:{url:"@",targetPush:"=",callback:"&",method:"@",params:"@",numName:"@",histroyCountName:"@",histroyCount:"@"},replace:!0,restrict:"A",controller:["$scope",function(t){}],link:function(n,o,i,r){var a=!1,l={flag:!0},c=void 0,s=angular.fromJson(n.params||"{}"),u=angular.lowercase(n.method||"post"),f=n.numName||"page",d=n.histroyCount||20,p=n.histroyCountName||"historyCountName",h=function(t){angular.isDefined(n.targetPush)&&n.targetPush.push(t),n.callback()&&n.callback()(t,l)},g=function(t){s[f]=s[f]-1,e.error("请求数据失败，请求路径"+n.url+"请求参数:"+n.params)},m=function(){a=!1},v=function(e){switch(u){case"post":t.getData(n.url,s).then(function(t){h(t),$.isFunction(e)&&e()}).catch(function(){g()}).finally(function(){m()});break;case"get":t.getDataByGet(n.url,s).then(function(t){h(t),$.isFunction(e)&&e()}).catch(function(){g()}).finally(function(){m()})}};s[f]=1,s[p]=d,v(function(){s[f]=2}),o.on("mousewheel",function(){if(c=o.closest(".mCustomScrollBox").next().find(".mCSB_dragger").css("bottom"),parseInt(c)<1&&!a&&l.flag)a=!0,s[f]=s[f]+1,v();else{var t=o.children(":last-child").val();console.log(t)}})}}}]),APP.directive("appTabs",["$timeout","uuid","$log",function(t,e,n){return{restrict:"EA",transclude:!0,scope:{},templateUrl:"script/common/directive/tabs/tab.html?t="+e.getUUID(),controller:["$scope",function(t){var e=t.scopes=[];t.select=function(t){angular.forEach(e,function(t){t.selected=!1}),t.selected=!0},this.addScope=function(o){0===e.length&&t.select(o),e.push(o),t.width=100/e.length+"%",n.info(t.width)}}],link:function(t,e,n,o){}}}]),APP.directive("appPanel",["$timeout","uuid",function(t,e){return{restrict:"EA",scope:{tittle:"@"},replace:!0,transclude:!0,require:"^appTabs",templateUrl:"script/common/directive/tabs/panel.html?t="+e.getUUID(),link:function(t,e,n,o){o.addScope(t)}}}]),APP.directive("appPanelLazy",["$timeout","uuid",function(t,e){return{restrict:"EA",scope:{tittle:"@"},replace:!0,transclude:!0,require:"^appTabs",templateUrl:"script/common/directive/tabs/panelLazy.html?t="+e.getUUID(),link:function(t,e,n,o){o.addScope(t)}}}]),APP.filter("thousands",[function(){return function(t,e){e=e||2;var n=function(t){t=String(t).replace(",","");var n=parseFloat(t);isNaN(n)&&(n="0");for(var o="1",i=0;i<e;i++)o+="0";var r=(n=Math.round(t*o)/o).toString(),a=r.indexOf(".");for(a<0&&(a=r.length,r+=".");r.length<=a+parseInt(e);)r+="0";return r}(t).replace(/\d{1,3}(?=(\d{3})+(\.\d*)?$)/g,"$&,");return n=n.split(".")[0]+"."+n.split(".")[1].replace(",","")}}]),APP.controller("homeCtrl",["$rootScope","$scope","$log","localStorageService","loginMode","$state","$timeout","$ngConfirm",function(t,e,n,o,i,r,a,l){e.loginOut=function(){l({theme:"supervan",title:"提示!",content:"<strong>您确定要退出吗?</strong>",scope:e,buttons:{sayBoo:{text:"确定",btnClass:"btn-blue",action:function(t,e){return o.remove(i.NAME),r.go("login",{},{location:"replace"}),!0}},close:{text:"取消",btnClass:"btn-default"}}})},e.showUserInfo=function(){e.userInfoMode?e.userInfoMode=!1:e.userInfoMode=!0},e.showOrHideNav=function(t){e[t]?e[t]=!1:e[t]=!0;var o=Array.from(e);for(var i in o)n.info(i)}}]),APP.controller("loginCtrl",["$rootScope","$scope","$log","localStorageService","loginMode","$state","$timeout","$location",function(t,e,n,o,i,r,a,l){o.get(i.NAME)==i.RESULT&&r.go("home.main",{},{location:"replace"}),e.login=function(){o.set(i.NAME,i.RESULT),r.go("home.main",{},{absolute:!0,location:"replace"})}}]),APP.directive("dropseaNavUserInfo",["uuid",function(t){return{templateUrl:"script/platform/directive/navUserInfo/navUserInfo.html?t="+t.getUUID(),scope:{},replace:!0,restrict:"E",controller:["$scope",function(t){}],link:function(t,e,n,o){}}}]),APP.directive("panel1a",["uuid",function(t){return{templateUrl:"script/platform/directive/panel1/panel1.html?t="+t.getUUID(),scope:{},replace:!1,restrict:"E",controller:["$scope",function(t){}],link:function(t,e,n,o){}}}]),APP.controller("panel1Ctrl",["$timeout",function(t){(new Set).add(1),t(function(){console.log("aaa")},0)}]),APP.controller("mainCtrl",["$scope","$timeout","$myHttp","cache","$log",function(t,e,n,o,i){e(function(){i.info("info")},0),t.params={page:4},t.money=4544444444444444,t.handler=function(){return function(e,n){n.flag=e.data.object.hasMoreData,t.items.push(e.data.object.data)}},t.name="jsdf",t.scrollbarConfig={setHeight:200},t.items=["张三"];for(var r=0;r<30;r++)t.items.push("lisi"+r);t.showBgPanel=!1,t.mydate="2017",t.add=function(){t.aaa="2342423",n.getDataByGet("data/data.json").then(function(i){return o.put("a","aa"),e(function(){t.$digest(),t.$apply(function(){t.data+=i})},0),n.getDataByGet("data/test.json")}).then(function(e){console.log(e),t.items.push(e)}).catch(function(t){console.log(t)}).finally(function(){console.log("请求结束")})}}]),APP.controller("organizationCtrl",["$scope","$timeout","$myHttp","cache","$log",function(t,e,n,o,i){t.callback=function(){alert(12334534)}}]);