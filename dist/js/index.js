"use strict";function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var APP=angular.module("app",["ui.router","ngScrollbars","ngCookies","validation","moment-picker","LocalStorageModule","cp.ngConfirm","ngDialog","ngFileUpload","treeControl","ui.tree","oi.select"]);APP.constant("loginMode",{NAME:"LOGINMODE",RESULT:"success"}),APP.constant("userInfo",{createDate:"createDate",logName:"logName",loginCount:"loginCount",remark:"remark",sysToken:"sysToken",userID:"userID",password:"lkasjdfllksadjf"}),APP.constant("templateMainType",[{name:"管理",type:"1"},{name:"审批",type:"2"}]),APP.constant("buildVerticalCardConstant",{descPosition:[{name:"居中",type:"0",style:"text-align:center !important;"},{name:"居左",type:"1",style:"text-align:left !important;"},{name:"居右",type:"2",style:"text-align:right !important;"}],isBold:[{name:"正常",type:"0",style:"font-weight: normal !important;"},{name:"加粗",type:"1",style:"font-weight: bold !important;"}],isPortrait:[{name:"纵",type:"1"},{name:"横",type:"0"}]}),APP.constant("colorConstant",[{name:"深蓝",type:"#1B264F"},{name:"深青",type:"#00BB9C"},{name:"蓝色",type:"#56ABE4"},{name:"紫色",type:"#9D55B8"},{name:"红色",type:"#EB4F38"},{name:"橙色",type:"#EA8010"},{name:"金色",type:"#F4C600"},{name:"鲜绿",type:"#11CD6E"},{name:"沙棕",type:"#F4A460"}]),APP.constant("buildTextConstant",{textType:[{name:"无",type:"1"},{name:"身份证",type:"2"},{name:"手机号",type:"3"}],textRows:[{name:"单行",type:"1"},{name:"多行",type:"2"}],cardElementAttributeConstant:[{name:"必填",type:"1"},{name:"消息内容",type:"2"},{name:"列表显示",type:"3"},{name:"审批可改",type:"4"},{name:"通栏",type:"5"}],cardElementExplainShowFlagConstant:[{name:"不显示",type:"0"},{name:"显示",type:"1"}]}),APP.constant("buildNumberConstant",{decimalDigits:[{name:"1",type:"1"},{name:"2",type:"2"},{name:"3",type:"3"},{name:"4",type:"4"},{name:"5",type:"5"},{name:"6",type:"6"},{name:"7",type:"7"},{name:"8",type:"8"},{name:"9",type:"9"},{name:"10",type:"10"},{name:"11",type:"11"},{name:"12",type:"12"},{name:"13",type:"13"},{name:"14",type:"14"},{name:"15",type:"15"},{name:"16",type:"16"},{name:"17",type:"17"},{name:"18",type:"18"},{name:"19",type:"19"},{name:"20",type:"20"}],thousands:[{name:"关",type:0},{name:"开",type:1}],percentage:[{name:"关",type:0},{name:"开",type:1}],cardElementAttributeConstant:[{name:"必填",type:"1"},{name:"消息内容",type:"2"},{name:"审批可改",type:"4"},{name:"通栏",type:"5"}],cardElementExplainShowFlagConstant:[{name:"不显示",type:"0"},{name:"显示",type:"1"}]}),APP.constant("positionConstant",[{name:"显示在第一行",type:"01"},{name:"显示在第二行(第1个)",type:"11"},{name:"显示在第二行(第2个)",type:"12"},{name:"显示在第二行(第3个)",type:"13"}]),APP.constant("cardElementAttributeConstant",[{name:"必填",type:"1"},{name:"推送",type:"2"},{name:"列表显示",type:"3"},{name:"审批可改",type:"4"},{name:"通栏",type:"5"},{name:"主页显示",type:"6"},{name:"子文件夹名称",type:"7"},{name:"是否汇总",type:"8"},{name:"是否生成序号",type:"9"},{name:"明细是否显示表头",type:"10"}]),APP.constant("buildDateIntervalConstant",{dateType:[{name:"年-月-日 时:分",type:"1"},{name:"年-月-日",type:"2"},{name:"时:分",type:"3"}],isAlert:[{name:"提醒",type:"1"},{name:"不提醒",type:"0"}],cardElementAttribute:[{name:"必填",type:"1"},{name:"消息内容",type:"2"},{name:"列表显示",type:"3"},{name:"审批可改",type:"4"},{name:"通栏",type:"5"}]}),APP.constant("buildUploadConstant",{cardElementAttribute:[{name:"审批可改",type:"4"}]}),APP.constant("buildSelectConstant",{selectType:[{name:"单选",type:"1"},{name:"多选",type:"2"}],cardElementAttribute:[{name:"必填",type:"1"},{name:"消息内容",type:"2"},{name:"列表显示",type:"3"},{name:"审批可改",type:"4"},{name:"通栏",type:"5"}],selectData:[{name:"从基础数据中选择",type:"1"},{name:"选择部门或人员",type:"2"},{name:"选择客户",type:"3"}]}),APP.constant("buildDateConstant",{dateType:[{name:"年-月-日 时:分",type:"1"},{name:"年-月-日",type:"2"},{name:"时:分",type:"3"}],isAlert:[{name:"提醒",type:"1"},{name:"不提醒 ",type:"0"}],cardElementAttribute:[{name:"必填",type:"1"},{name:"消息内容",type:"2"},{name:"列表显示",type:"3"},{name:"审批可改",type:"4"},{name:"通栏",type:"5"}]}),APP.config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("login",{url:"/login",templateUrl:"script/platform/component/login/login.html",controller:"loginCtrl"}).state("home",{url:"/home",templateUrl:"script/platform/component/home/home.html",controller:"homeCtrl"}),e.state("public",{url:"/public",templateUrl:"script/platform/nc/indexPage.html"}),e.state("home.main",{url:"/main",templateUrl:"script/platform/component/home/main/main.html"}),e.state("home.organization",{url:"/organization",templateUrl:"script/platform/component/home/organization/organization.html"}).state("home.organization.right",{params:{entId:null,createUserId:null,enterpriseName:null},url:"/right",views:{"right@home.organization":{templateUrl:"script/platform/component/home/organization/right/organizationRight.html"}}}),e.state("home.userInfo",{url:"/userInfo",templateUrl:"script/platform/component/home/user/userInfo/userInfo.html"}),e.state("home.userSet",{url:"/userSet",templateUrl:"script/platform/component/home/user/userSet/userSet.html"}),e.state("home.myTemplateIndex",{url:"/myTemplateIndex",templateUrl:"script/platform/component/home/myTemplate/index.html"}).state("home.myTemplate",{params:{entId:null,createUserId:null,enterpriseName:null},url:"/myTemplate",templateUrl:"script/platform/component/home/myTemplate/left/myTemplate.html"}).state("home.myTemplate.addMainTemplate",{params:{entId:null,createUserId:null,enterpriseName:null},url:"/addMainTemplate",views:{"right@home.myTemplate":{templateUrl:"script/platform/component/home/myTemplate/right/mainTemplate/addMainTemplate/addMainTemplate.html"}}}).state("home.myTemplate.previewMainTemplate",{params:{templateId:null,templateName:null},url:"/previewMainTemplate",views:{"right@home.myTemplate":{templateUrl:"script/platform/component/home/myTemplate/right/mainTemplate/previewMainTemplate/previewMainTemplate.html"}}}).state("home.myTemplate.detailInfo",{params:{templateName:null},url:"/detailInfo",views:{"right@home.myTemplate":{templateUrl:"script/platform/component/home/myTemplate/right/mainTemplate/previewMainTemplate/detailInfo/detailInfo.html"}}}).state("home.myTemplate.buildVerticalCard",{url:"/buildVerticalCard",views:{"right@home.myTemplate":{templateUrl:"script/platform/component/home/myTemplate/right/mainTemplate/previewMainTemplate/buildVerticalCard/buildVerticalCard.html"}}}).state("home.myTemplate.buildText",{url:"/buildText",views:{"right@home.myTemplate":{templateUrl:"script/platform/component/home/myTemplate/right/mainTemplate/previewMainTemplate/buildText/buildText.html"}}}).state("home.myTemplate.buildSelect",{url:"/buildSelect",views:{"right@home.myTemplate":{templateUrl:"script/platform/component/home/myTemplate/right/mainTemplate/previewMainTemplate/buildSelect/buildSelect.html"}}}).state("home.myTemplate.subTemplate",{params:{entId:null,createUserId:null,enterpriseName:null},url:"/subTemplate",views:{"right@home.myTemplate":{templateUrl:"script/platform/component/home/myTemplate/right/subTemplate/subTemplate.html"}}}),t.otherwise("login")}]),APP.run(["$rootScope","$log","$timeout","loginMode","$state","$stateParams","$transitions","localStorageService","$trace",function(e,t,n,a,o,r,i,l,s){e.$state=o,e.$stateParams=r,i.onStart({},function(){l.get(a.NAME)!=a.RESULT&&o.go("login")}),e.$on("LocalStorageModule.notification.setitem",function(e,n){n&&n.key==a.NAME&&t.info("用户正在尝试登陆")}),e.$on("LocalStorageModule.notification.removeitem",function(e,n){n&&n.key==a.NAME&&t.info("用户正在退出登陆")})}]),APP.controller("indexCtrl",["$timeout","$log","$scope","localStorageService","$rootScope","$state","loginMode","$ngConfirm",function(e,t,n,a,o,r,i,l){n.bodyClick=function(){n.$broadcast("onBodyClick",{})}}]),$.extend({getRandom:function(){var e=Math.random()+"";return e=e.split(".")[1]},clone:function(e){var t=!1,n=1;return"boolean"==typeof e&&(t=e,e=arguments[1]||{},n++),$.each([].slice.call(arguments,n),function(n){var a,o,r,i,l;for(i in n)l=e[i],r=n[i],e!==r&&(t&&r&&(angular.isObject(r)||(a=angular.isArray(r)))?(o=a?l&&angular.isArray(l)?l:[]:l&&angular.isObject(l)?l:{},e[i]=extend(t,o,r)):void 0!==r&&(e[i]=r))}),e}}),APP.run(["$rootScope",function(e){e.colors={white:"#FFF",main:"#366092",tableBg:"#f0f4fa",tableBorder:"#bfbfbf",tableInsideBorder1:"#d9d9d9",tableInsideBorder2:"#e8e8e8",menuSecond:"#373d41",menuSelected:"#95b3d7",font1:"#366092",font2:"#5385c1",font3:"#ff0000",font4:"#000000",font5:"#333333",font6:"#808080"},e.fontZize={big:"16px",middleBig:"14px",middleSmall:"13px",small:"12px"}}]),APP.config(["$sceDelegateProvider",function(e){e.resourceUrlWhitelist(["*://localhost:8080/**","self"]),e.resourceUrlWhitelist(["*://app.zhuoxitech.com:8443/**","self"]),e.resourceUrlWhitelist(["*://192.168.2.107:8080/**","self"]),e.resourceUrlWhitelist(["*://*.*.*.*:*/**","self"]),e.resourceUrlWhitelist(["*://*:*/**","self"])}]),APP.config(["localStorageServiceProvider",function(e){e.setPrefix("dropsea").setStorageType("sessionStorage").setNotify(!0,!0)}]),APP.config(["momentPickerProvider",function(e){e.options({locale:"zh-cn",format:"L LTS",minView:"decade",maxView:"minute",startView:"year",autoclose:!0,today:!1,keyboard:!1,leftArrow:"&larr;",rightArrow:"&rarr;",yearsFormat:"YYYY",monthsFormat:"MMM",daysFormat:"D",hoursFormat:"HH:[00]",minutesFormat:moment.localeData().longDateFormat("LT").replace(/[aA]/,""),secondsFormat:"ss",minutesStep:5,secondsStep:1})}]),APP.config(["$qProvider",function(e){e.errorOnUnhandledRejections(!1)}]),APP.config(["ScrollBarsProvider",function(e){e.defaults={autoHideScrollbar:!1,scrollAmount:"auto",setHeight:"100%",scrollInertia:500,axis:"yx",theme:"minimal-dark",advanced:{updateOnContentResize:!0},scrollButtons:{scrollAmount:"auto",enable:!1}}}]),APP.config(["treeConfig",function(e){e.defaultCollapsed=!0,e.appendChildOnHover=!0,e.collapsed=!0}]),APP.config(["$validationProvider","localStorageServiceProvider","userInfo",function(e,t,n){var a,o,r=(a={required:function(e){return!!e},phone:/^1[34578]\d{9}$/,password:function(e){return e>5},email:/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/},_defineProperty(a,"password",/(?=.*[0-9])(?=.*[a-zA-Z])(?=.*[^a-zA-Z0-9]).{8,30}/),_defineProperty(a,"comparePassword",function(e,t,n,a,o){return e==$("#"+o).val()}),_defineProperty(a,"compareOldPassword",function(e,t,n,a,o){return e==o}),_defineProperty(a,"none",function(e){return!0}),a),i=(o={required:{error:"该内容为必填选项，请耐心填写",success:""},phone:{success:"",error:"手机号码有误，请重新输入"},password:{success:"",error:" 长度至少6位"},email:{success:"",error:"邮箱格式有误，请重新输入"}},_defineProperty(o,"password",{success:"",error:"密码必须有数字英文字母和特殊字符组成"}),_defineProperty(o,"comparePassword",{success:"",error:"两次输入密码不一致"}),_defineProperty(o,"compareOldPassword",{success:"",error:"旧密码输入有误"}),_defineProperty(o,"none",{success:"",error:""}),o);e.setExpression(r).setDefaultMsg(i)}]),APP.service("$appHttp",["$rootScope","$filter","$http","$timeout","$q","localStorageService","$log",function(e,t,n,a,o,r,i){function l(e){if(!angular.isObject(e))return null==e?"":e.toString();var t=[];for(var n in e)if(e.hasOwnProperty(n)){var a=e[n];t.push(encodeURIComponent(n)+"="+encodeURIComponent(null==a?"":a))}return t.join("&").replace(/%20/g,"+")}this.getData=function(e){$.isFunction(e.before)&&e.before(),void 0==e.enableCache&&(e.enableCache=!1);var t=o.defer(),a=l(e.params),s=void 0,c=r.get(s);return s=0==a.length?e.url:e.url+"?"+a,e.enableCache&&c?(c.isCacheData=!0,t.resolve(c)):n({mehtod:"POST",url:s,data:e.params,headers:{"Content-Type":void 0}}).then(function(n){e.enableCache&&r.set(s,n),n.isCacheData=!1,i.info("请求url---------------------------------"),i.info(s),i.info("请求结果---------------------------------"),i.info(n),t.resolve(n)}).catch(function(e){t.reject(e)}),t.promise},this.getDataByGet=function(e){$.isFunction(e.before)&&e.before(),void 0==e.enableCache&&(e.enableCache=!1);var t=o.defer(),a=l(e.params),i=e.url+"?"+a,s=r.get(i);return e.enableCache&&s?(s.isCache=!0,t.resolve(s)):n.get(e.url,{params:e.params}).then(function(n){e.enableCache&&r.set(i,n),n.isCache=!1,t.resolve(n)}).catch(function(e){t.reject(e)}),t.promise},this.getDataByJsonp=function(e,t,a,r){$.isFunction(r)&&r();var i=o.defer();return n.jsonp(e,{params:t,jsonpCallbackParam:a||"callback"}).then(function(e){i.resolve(e)}).catch(function(e){i.reject(e)}),i.promise}}]),APP.service("cache",["$cookies",function(e){this.put=function(t,n){e.put(t,n)},this.get=function(t){return e.get(t)},this.remove=function(t){e.remove(t)}}]),APP.service("tree",["$rootScope","$filter","$http","$timeout","$q",function(e,t,n,a,o){return{init:function(e){var t=$("#"+e);t.on("click","li div",function(e){var n=$(this);t.find("li div").css({"background-color":"white",color:"black"}),n.css({"background-color":"#373d41",color:"white"})})},addLevel:function(e,t,n,a){a||(a=1),n||(n=20);for(var o=0;o<e.length;o++)if(e[o].paddingLeft=a*n+"px",e[o][t]&&e[o][t].length>0){var r=a+1;this.addLevel(e[o][t],t,n,r)}}}}]),APP.service("uuid",["$rootScope","$filter","$http","$timeout","$q",function(e,t,n,a,o){return{getUUID:function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)})}}}]),APP.controller("homeCtrl",["$rootScope","$scope","$log","localStorageService","loginMode","$state","$timeout","$ngConfirm","userInfo",function(e,t,n,a,o,r,i,l,s){t.userInfoMode=!1,t.$on("onBodyClick",function(e,n){t.userInfoMode=!1}),t.init=function(){t.loginName=a.get(s.logName)},t.loginOut=function(){l({theme:"supervan",title:"提示!",content:"<strong>您确定要退出吗?</strong>",scope:t,buttons:{sayBoo:{text:"确定",btnClass:"btn-blue",action:function(e,t){return a.remove(o.NAME),r.go("login",{},{location:"replace"}),!0}},close:{text:"取消",btnClass:"btn-default"}}})},t.showUserInfo=function(e){e.stopPropagation(),t.userInfoMode?t.userInfoMode=!1:t.userInfoMode=!0},t.showOrHideNav=function(e){t[e]?t[e]=!1:t[e]=!0;var a=Array.from(t);for(var o in a)n.info(o)}}]),APP.controller("loginCtrl",["$rootScope","$scope","$log","localStorageService","loginMode","$state","$timeout","$appHttp","$loading","userInfo",function(e,t,n,a,o,r,i,l,s,c){a.get(o.NAME)==o.RESULT&&r.go("home.main",{},{location:"replace"}),t.login=function(){t.logName="18735885176",t.password="1",t.message="正在登陆";var e=!1;l.getData({url:"/CommonPlatform/customUserConfig!login.action",params:{logName:t.logName,password:t.password},before:function(){s.start("login")}}).then(function(e){e&&e.data&&e.data.sysToken?(a.set(c.createDate,e.data.creatDate),a.set(c.logName,e.data.logName),a.set(c.loginCount,e.data.loginCount),a.set(c.remark,e.data.remark),a.set(c.sysToken,e.data.sysToken),a.set(c.userID,e.data.userID),a.set(o.NAME,o.RESULT),a.set(c.password,t.password),r.go("home.myTemplate",{},{absolute:!0,location:"replace"})):t.message="登陆失败，错误原因:"+e.data.remark}).catch(function(a){n.error(a),e=!0,t.message="登陆失败，错误原因:"+a}).finally(function(){e?i(function(){s.finish("login")},2e3):s.finish("login")})}}]),APP.directive("dropseaFileUpload",["$timeout","uuid","$log","Upload",function(e,t,n,a){return{templateUrl:"script/common/directive/fileUpload/fileUpload.html?t="+t.getUUID(),scope:{eventName:"@",title:"@",placeholder:"@"},transclude:!0,restrict:"EA",replace:!1,controller:["$scope",function(e){}],link:function(t,n,o,r){t.files=[],t.resultData=[],r.fileResult={},t.uploadFiles=function(n,o){if(t.errFile=o&&o[0],n){var i={file:n,errFile:t.errFile,progress:"0%",errorMsg:""};t.files.push(i),n.upload=a.upload({url:"/CommonPlatform/fileUtil!uploadFile.action",data:{files:n}}),n.upload.then(function(a){e(function(){a.data.result?(n.result=a.data,t.resultData.push(a.data),t.$emit(t.eventName,a.data),r.fileResult[t.propName]=t.resultData):i.errorMsg=a.data.msg})},function(e){e.status>0&&($obj.errorMsg=e.status+": "+e.data)},function(e){i.progress=Math.min(100,parseInt(100*e.loaded/e.total))})}}}}}]),APP.directive("dropseaNavUserInfo",["uuid","$state",function(e,t){return{templateUrl:"script/platform/directive/navUserInfo/navUserInfo.html?t="+e.getUUID(),scope:{},replace:!0,restrict:"E",controller:["$scope",function(e){}],link:function(e,n,a,o){e.gotoOrganization=function(e){t.go("home.organization")},e.gotoUserInfo=function(e){t.go("home.userInfo")},e.gotoUserSet=function(e){t.go("home.userSet")},e.gotoMyTemplate=function(e){t.go("home.myTemplateIndex")}}}}]),APP.directive("dropseaSelect",["$timeout","uuid","$log","$appHttp","$loading",function(e,t,n,a,o){return{templateUrl:"script/platform/directive/select/select.html?t="+t.getUUID(),scope:{selectUrl:"@",ngBindModel:"=ngModel"},transclude:!0,restrict:"EA",replace:!1,controller:["$scope",function(e){}],link:function(e,n,r,i){if(e.id="select"+t.getUUID(),r.multiple?e.multiple="multiple":e.multiple="",e.items=[],console.log(e.selectUrl),e.selectUrl){var l=JSON.parse(e.selectUrl);if(e.name=l.name,"url"==l.type)a.getData({params:{},url:"/CommonPlatform/"+l.data,before:function(){o.start(e.id)}}).then(function(t){var n=t.data;if(n.length>0){for(var a=0;a<n.length;a++)e.items.push({name:n[a].dicinfo,type:n[a]});o.finish(e.id)}}).catch(function(t){o.finish(e.id)}).finally(function(){});else if("user"==l.type){var s=l.data;angular.forEach(s,function(t,n){e.items.push({name:t.userName,type:t})})}else if("group"==l.type){var c=l.data;angular.forEach(c,function(t,n){e.items.push({name:t.dicinfo,type:t})})}}}}}]),APP.directive("panel1a",["uuid",function(e){return{templateUrl:"script/platform/directive/panel1/panel1.html?t="+e.getUUID(),scope:{},replace:!1,restrict:"E",controller:["$scope",function(e){}],link:function(e,t,n,a){}}}]),APP.controller("panel1Ctrl",["$timeout",function(e){(new Set).add(1),e(function(){console.log("aaa")},0)}]),APP.directive("dropseaTextContent",["$timeout","uuid","$log",function(e,t,n){return{restrict:"AE",transclude:!0,reuqire:"ngModel",templateUrl:"script/common/directive/textContent/textContent.html?t="+t.getUUID(),scope:{title:"@",ngBindModel:"=ngModel",textrows:"@"},template:"",controller:["$scope",function(e){}],link:function(e,t,n,a){n.placeholder?e.placeholder=n.placeholder:e.placeholder="",n.validator?e.validator=n.validator:e.validator="none",n.showDesc&&"true"==n.showDesc?e.showDesc=!0:e.showDesc=!1,n.desc?e.desc=n.desc:e.desc=""}}}]),APP.directive("appColor",[function(){return{scope:{},restrict:"A",link:function(e,t,n,a){function o(e,a){var o,r=n.defaultColor?n.defaultColor+" !important":n.defaultColor,i=n.positiveColor?n.positiveColor+" !important":n.positiveColor,l=n.negativeColor?n.negativeColor+" !important":n.negativeColor,s=n.zeroColor?n.zeroColor+" !important":n.zeroColor,c=n.target;o=void 0!=c?c:$(t)[0].innerHTML.replace(/,/g,""),isNaN(parseFloat(o))?t.css("cssText","color:"+r):(0==o&&(s?t.css("cssText","color:"+s):i?t.css("cssText","color:"+i):t.css("cssText","color:"+r)),o>0&&(i?t.css("cssText","color:"+i):t.css("cssText","color:"+r)),o<0&&(l?t.css("cssText","color:"+l):t.css("cssText","color:"+r)))}void 0!=n.target?e.$watch(function(){return n.target},function(e,t){o()}):e.$watch(function(){return t[0].innerHTML},function(e,t){o()})}}}]),APP.directive("appClassifiedCard",["$timeout","uuid","$compile",function(e,t,n){return{templateUrl:"script/common/directive/classifiedCard/classifiedCard.html?t="+t.getUUID(),reuqire:"ngModel",scope:{ngBindModel:"=ngModel",placeholder:"@"},restrict:"E",controller:["$scope",function(e){}],link:function(e,t,n,a){}}}]),APP.directive("appDynamic",["$compile",function(e){return{restrict:"A",scope:{handler:"&"},link:function(t,n,a){t.$watch(function(){return a.appDynamic},function(o){a.handler&&(o=t.handler()),n.html(o&&o.toString());var r=t;a.bindHtmlScope&&(r=t.$eval(a.bindHtmlScope)),e(n.contents())(r)})}}}]),APP.directive("appCurrency",["$filter","$browser",function(e,t){return{require:"ngModel",link:function(n,a,o,r){var i={thousands:e("number")(1e3).substr(1,1),decimal:e("number")(1.1).substr(1,1)},l=!1,s=o.bit||2;r.$parsers.push(function(e){return o.isF&&e>0&&(e=-e),e+"".split(i.thousands).join("").split(i.decimal).join(".")}),r.$render=function(){a.val(e("number")((r.$viewValue+"").replace(/,/g,""),s,!1))};var c=function(){var t=a.val().split(i.thousands).join("").split(i.decimal).join(".");l?l=!1:(o.isF&&t>0&&(t=-t),a.val(e("number")(t,s)))};a.bind("focus",function(){if(!o.readonly&&"true"!=o.readonly){var e=r.$modelValue;if(!angular.isUndefined(e)){var t=e.toString().replace(/,/g,"");0==parseFloat(t)&&(t=""),a.val(t)}}}),a.bind("blur",function(){c()}),a.bind("keypress",function(e){var t=e.which;0==t||8==t||15<t&&t<19||37<=t&&t<=40||(String.fromCharCode(t)==i.thousands||String.fromCharCode(t)==i.decimal||48<=t&&t<=57||"-"==String.fromCharCode(t)?String.fromCharCode(t)==i.decimal&&(l=!0):e.preventDefault())}),a.bind("paste cut",function(){t.defer(c)})}}}]),APP.directive("appendText",[function(){return{scope:{},restrict:"A",link:function(e,t,n,a){t.on("blur",function(){n.appendText&&t.val(t.val()+n.appendText)}),t.on("focus",function(){if(n.appendText){var e=t.val();e=e.substring(0,e.indexOf(n.appendText)),t.val(e)}})}}}]),APP.directive("appInput",["$timeout","uuid","$log",function(e,t,n){return{templateUrl:"script/common/directive/input/input.html?t="+t.getUUID(),scope:{clazz:"@class",title:"@"},transclude:!0,restrict:"EA",replace:!0,controller:["$scope",function(e){}],link:function(e,n,a,o){e.id="input-"+t.getUUID(),e.isBottom=!!a.isBottom,e.isRight=!!a.isRight}}}]),APP.directive("script",[function(){return{restrict:"E",scope:!1,link:function(e,t,n){if("text/javascript-lazy"===n.type){var a=document.createElement("script");a.type="text/javascript";var o=t.attr("src");if(void 0!==o)a.src=o;else{var r=t.text();a.text=r}document.head.appendChild(a),t.remove()}}}}]),APP.directive("appLeftRightLayout",["$timeout","uuid",function(e,t){return{templateUrl:"script/common/directive/leftRightLayout/leftRightLayout.html?t="+t.getUUID(),scope:{width:"@",height:"@",clazz:"@class",leftWidth:"@",leftStyle:"@",rightStyle:"@",centerStyle:"@",centerWidth:"@",centerIconStyle:"@"},replace:!0,transclude:{left:"?left",right:"?right"},restrict:"E",controller:["$scope",function(e){}],link:function(n,a,o,r){n.id="lrc-containerd-"+t.getUUID(),n.curIsShowLeft=!0,n.leftWidthBak=n.leftWidth;var i="glyphicon glyphicon-triangle-left";n.centerIcon=i,n.height||(n.height="100%"),n.width||(n.width="100%"),n.class||(n.class=""),n.leftWidth?n.leftWidth=parseFloat(n.leftWidth)+10+"px":n.leftWidth="50%",angular.isDefined(n.leftStyle)||(n.leftStyle=""),angular.isDefined(n.rightStyle)||(n.rightStyle=""),angular.isDefined(n.centerStyle)||(n.centerStyle=""),angular.isDefined(n.centerWidth)||(n.centerWidth="13.6px"),angular.isDefined(n.centerIconStyle)||(n.centerIconStyle=""),a.find("left,right").addClass("h-100 w-100 d-ib"),a.find(".lrl-centerBtn").css("visibility","hidden"),a.on("mouseenter",function(){a.find(".lrl-centerBtn").css("visibility","visible")}),a.on("mouseleave",function(){a.find(".lrl-centerBtn").css("visibility","hidden")}),$(".lrl-centerBtn").on("click",function(){n.curIsShowLeft?(n.curIsShowLeft=!1,$("#a"+n.id).animate({width:0}),$("#b"+n.id).animate({"margin-left":0}),n.leftWidth=0,e(function(){n.$apply(function(){n.centerIcon="glyphicon glyphicon-triangle-right"})},0)):(n.curIsShowLeft=!0,$("#b"+n.id).animate({"margin-left":n.leftWidthBak}),$("#a"+n.id).animate({width:n.leftWidthBak}),n.leftWidth=n.leftWidthBak,e(function(){n.$apply(function(){n.centerIcon=i})},0))})}}}]),function(APP){function extend(e){var t=!1,n=1;return"boolean"==typeof e&&(t=e,e=arguments[1]||{},n++),angular.forEach([].slice.call(arguments,n),function(n){var a,o,r,i,l;for(i in n)l=e[i],r=n[i],e!==r&&(t&&r&&(angular.isObject(r)||(a=angular.isArray(r)))?(o=a?l&&angular.isArray(l)?l:[]:l&&angular.isObject(l)?l:{},e[i]=extend(t,o,r)):void 0!==r&&(e[i]=r))}),e}APP.value("appLoadingOptions",{active:!1,text:"Loading...",className:"",overlay:!0,spinner:!0,spinnerOptions:{lines:12,length:7,width:4,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:2,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"dw-spinner",top:"auto",left:"auto",position:"relative"}}).service("appLoading",["$timeout","$rootScope","appLoadingOptions",function(e,t,n){var a=this;a.setDefaultOptions=function(e){extend(!0,n,e)},a.start=function(n){e(function(){t.$broadcast("$appLoadingStart",n)})},a.finish=function(n){e(function(){t.$broadcast("$appLoadingFinish",n)})}}]).factory("$loading",["appLoading",function(e){return e}]).directive("appLoading",["$rootScope","appLoadingOptions","uuid",function($rootScope,appLoadingOptions,uuid){return{link:function link(scope,element,attrs){attrs.$observe("appLoadingOptions",function(options){options=eval("("+options+")"),$("#"+id_).text(options.text)});var id_="apploading-"+uuid.getUUID(),spinner=null,key=attrs.appLoading||!1,options,container,body,spinnerContainer,text,start=function(){container&&container.addClass("dw-loading-active"),spinner&&spinner.spin(spinnerContainer[0])},finish=function(){container&&container.removeClass("dw-loading-active"),spinner&&spinner.stop()};scope.$watch(attrs.appLoadingOptions,function(e){finish(),options=extend(!0,{},appLoadingOptions,e),body=angular.element("<div></div>").addClass("dw-loading-body"),container=angular.element("<div></div>").addClass("dw-loading").append(body),options.overlay&&container.addClass("dw-loading-overlay"),options.className&&container.addClass(options.className),options.spinner&&(spinnerContainer=angular.element("<div></div>").addClass("dw-loading-spinner"),body.append(spinnerContainer),spinner=new Spinner(options.spinnerOptions)),options.text&&(text=angular.element('<div style="position:absolute; top:24px;width:100px;left:-50px" id="'+id_+'"></div>').addClass("app-loading-text").text(options.text),body.append(text)),element.append(container),!options.active&&key||start()},!0),$rootScope.$on("$appLoadingStart",function(e,t){t===key&&start()}),$rootScope.$on("$appLoadingFinish",function(e,t){t===key&&finish()}),scope.$on("$destroy",function(){finish(),spinner=null})}}}])}(APP),APP.directive("appListItem",["$timeout","uuid","$log",function(e,t,n){return{templateUrl:"script/common/directive/listItem/listItem.html?t="+t.getUUID(),scope:{name:"@",rightIconStyle:"@",rightBtnHandler:"&",rightIconAutoVisible:"@",rightIcon:"@",clazz:"@class"},transclude:!0,restrict:"E",replace:!1,controller:["$scope",function(e){}],link:function(e,n,a,o){angular.isDefined(e.rightIconAutoVisible)||(e.rightIconAutoVisible=!1),angular.isDefined(e.rightIcon)||(e.rightIcon="icon ColorChangeFont icon-you"),e.id="listItem-"+t.getUUID(),n.on("click",function(t){if(angular.isDefined(e.name)){var n=$('app-list-item[name="'+e.name+'"]');angular.forEach(n,function(e){$(e).find("div:eq(0)").removeClass("app-list-item-selected")}),$(this).find("div:eq(0)").addClass("app-list-item-selected")}}),e.clickRightBtn=function(){e.rightBtnHandler()},"true"==e.rightIconAutoVisible&&(n.find(".rightIcon").css("visibility","hidden"),n.on("mouseenter",function(){n.find(".rightIcon").css("visibility","visible")}),n.on("mouseleave",function(){n.find(".rightIcon").css("visibility","hidden")}))}}}]),APP.directive("appPagePanel",["$timeout","uuid","$state",function(e,t){return{templateUrl:"script/common/directive/pagePanel/pagePanel.html?t="+t.getUUID(),scope:{header:"@",width:"@",height:"@",headStyle:"@",textAlign:"@",leftBtnIcon:"@",clazz:"@class",callback:"&",leftBtnHandler:"&"},transclude:!0,restrict:"E",controller:["$scope",function(e){}],link:function(n,a,o,r){n.id="lrc-containerd-"+t.getUUID(),o.hasHeaderColor?"true"==o.hasHeaderColor?n.hasHeaderColor=!0:n.hasHeaderColor=!1:n.hasHeaderColor=!0,o.hasBorder?"true"==o.hasBorder?n.hasBorder=!0:n.hasBorder=!1:n.hasBorder=!0,o.borderWeight?n.borderWeight=o.borderWeight:n.borderWeight="1px",(!n.textAlign||"left"!=n.textAlign&&"center"!=n.textAlign&&"right"!=n.textAlign)&&(n.textAlign="center"),n.header||(n.header=""),n.height||(n.height="100%"),n.width||(n.width="100%"),n.headStyle||(n.headStyle="1"),n.leftBtnIcon||(n.leftBtnIcon="icon ColorChangeFont  icon-jian"),n.leftBtnClick=function(e){n.leftBtnHandler()},n.clazz||(n.clazz=""),n.showPanel=function(){a.find("#visiblePanel").removeClass("d-n").addClass("d-b")},n.hidePanel=function(){a.find("#visiblePanel").removeClass("d-b").addClass("d-n")},a.on("click"," .leftBtnIcon",function(){angular.isFunction(n.callback)&&n.callback()}),n.change=function(){e(function(){console.log(1111),n.$apply(function(){n.panel2=""})},2e3)}}}}]),APP.directive("appPopSelect",["$timeout","uuid","$log",function(e,t,n){return{restrict:"EA",transclude:!0,scope:{style:"@",target:"@"},templateUrl:"script/common/directive/popSelect/popSelect.html?t="+t.getUUID(),controller:["$scope",function(e){}],link:function(t,n,a,o){t.display="none",t.width="100%";var r=$(t.target);r||(r=n),t.targetText=r.html(),t.toggle=!0,$(window.document).on("click",function(){e(function(){t.$apply(function(){t.display="none",r.html(t.targetText),t.toggle=!0})})}),r.on("click",function(n){n.stopPropagation(),e(t.toggle?function(){t.$apply(function(){t.display="block",t.toggle=!1})}:function(){t.$apply(function(){r.html(t.targetText),t.toggle=!0,t.display="none"})})})}}}]),APP.directive("appRightLeftLayout",["$timeout","uuid",function(e,t){return{templateUrl:"script/directive/leftRightLayout/rightLeftLayout.html ?t="+t.getUUID(),scope:{width:"@",height:"@",clazz:"@class",leftWidth:"@",leftStyle:"@",rightStyle:"@",centerStyle:"@",centerWidth:"@",centerIconStyle:"@"},replace:!0,transclude:{left:"?left",right:"?right"},restrict:"E",controller:["$scope",function(e){}],link:function(n,a,o,r){n.id="lrc-containerd-"+t.getUUID(),n.curIsShowLeft=!0,n.leftWidthBak=n.leftWidth;var i="glyphicon glyphicon-triangle-left";n.centerIcon=i,n.height||(n.height="100%"),n.width||(n.width="100%"),n.class||(n.class=""),n.leftWidth?(console.log(parseFloat(n.leftWidth)+10+"px"),n.leftWidth=parseFloat(n.leftWidth)+10+"px"):n.leftWidth="50%",angular.isDefined(n.leftStyle)||(n.leftStyle=""),angular.isDefined(n.rightStyle)||(n.rightStyle=""),angular.isDefined(n.centerStyle)||(n.centerStyle=""),angular.isDefined(n.centerWidth)||(n.centerWidth="13.6px"),angular.isDefined(n.centerIconStyle)||(n.centerIconStyle=""),a.find("left,right").addClass("h-100 w-100 d-ib"),a.find(".lrl-centerBtn").css("visibility","hidden"),a.on("mouseenter",function(){a.find(".lrl-centerBtn").css("visibility","visible")}),a.on("mouseleave",function(){a.find(".lrl-centerBtn").css("visibility","hidden")}),$(".lrl-centerBtn").on("click",function(){n.curIsShowLeft?(n.curIsShowLeft=!1,$("#a"+n.id).animate({width:0}),$("#b"+n.id).animate({"margin-left":0}),n.leftWidth=0,e(function(){n.$apply(function(){n.centerIcon="glyphicon glyphicon-triangle-right"})},0)):(n.curIsShowLeft=!0,$("#a"+n.id).animate({width:n.leftWidthBak}),$("#b"+n.id).animate({"margin-left":n.leftWidthBak}),n.leftWidth=n.leftWidthBak,e(function(){n.$apply(function(){n.centerIcon=i})},0))})}}}]),APP.directive("appSection",["$timeout","uuid","$log",function(e,t,n){return{templateUrl:"script/common/directive/section/section.html?t="+t.getUUID(),scope:{header:"@",height:"@",visible:"@"},transclude:{header:"?header",section:"?section"},restrict:"E",replace:!1,controller:["$scope",function(e){}],link:function(n,a,o,r){n.id="section"+t.getUUID(),"true"==n.visible?(n.visible=!0,a.find("section").css("height","0")):(n.visible=!1,a.find('div[name="containerkl234jnsd"]').height(parseFloat(n.height)-28+"px")),n.showSectionHandler=function(){var t=a.find('div[name="containerkl234jnsd"]');"false"==n.visible||0==n.visible?(e(function(){a.find("section").animate({height:0})},10),e(function(){t.animate({height:0},function(){n.visible=!0})},10)):(e(function(){a.find("section").animate({height:parseFloat(n.height)-28+"px"})},10),e(function(){t.animate({height:parseFloat(n.height)-28+"px"},function(){n.visible=!1})}))}}}}]),APP.directive("appScrollLoad",["$appHttp","$log","uuid",function(e,t,n){return{template:"",scope:{url:"@",targetPush:"=",callback:"&",method:"@",params:"@",numName:"@",histroyCountName:"@",histroyCount:"@"},replace:!0,restrict:"A",controller:["$scope",function(e){}],link:function(n,a,o,r){var i=!1,l={flag:!0},s=void 0,c=angular.fromJson(n.params||"{}"),p=angular.lowercase(n.method||"post"),d=n.numName||"page",u=n.histroyCount||20,m=n.histroyCountName||"historyCountName",f=function(e){angular.isDefined(n.targetPush)&&n.targetPush.push(e),n.callback()&&n.callback()(e,l)},g=function(e){c[d]=c[d]-1,t.error("请求数据失败，请求路径"+n.url+"请求参数:"+n.params)},h=function(){i=!1},y=function(t){switch(p){case"post":e.getData(n.url,c).then(function(e){f(e),$.isFunction(t)&&t()}).catch(function(){g()}).finally(function(){h()});break;case"get":e.getDataByGet(n.url,c).then(function(e){f(e),$.isFunction(t)&&t()}).catch(function(){g()}).finally(function(){h()})}};c[d]=1,c[m]=u,y(function(){c[d]=2}),a.on("mousewheel",function(){if(s=a.closest(".mCustomScrollBox").next().find(".mCSB_dragger").css("bottom"),parseInt(s)<1&&!i&&l.flag)i=!0,c[d]=c[d]+1,y();else{var e=a.children(":last-child").val();console.log(e)}})}}}]),APP.directive("appTable",["$timeout","uuid","$log",function(e,t,n){return{templateUrl:"script/common/directive/table/table.html?t="+t.getUUID(),scope:{height:"@",data:"@"},transclude:!0,replace:!0,restrict:"E",controller:["$scope",function(e){var t=e.trs=[];this.addTr=function(n){n.titleData=e.titleData,t.push(n)}}],link:function(e,a,o,r){e.id="table-"+t.getUUID(),angular.isDefined(e.height)||(e.height="100%"),-1!=e.height.indexOf("%")?e.contentHeight="calc(100% - 28px)":e.contentHeight=parseFloat(e.height)-28+"px",angular.isDefined(e.data)||n.error("请配置表头数据"),e.titleData=angular.fromJson(e.data)}}}]),APP.directive("appTr",["$rootScope","uuid",function(e,t){return{restrict:"EA",scope:{titleData:"@"},replace:!0,transclude:!0,require:"^appTable",templateUrl:"script/common/directive/table/tr.html?t="+t.getUUID(),controller:["$scope",function(e){var t=e.tds=[];this.addTd=function(n){e.titleData&&(e.titleData[t.length].style&&(n.publicStyle=e.titleData[t.length].style),t.push(n))}}],link:function(e,t,n,a){e.$watch("titleData",function(t,n){a.addTr(e)})}}}]),APP.directive("appTd",["$rootScope","uuid",function(e,t){return{restrict:"EA",scope:{style:"@privateStyle",titleData:"@"},replace:!0,transclude:!0,require:"^appTr",templateUrl:"script/common/directive/table/td.html?t="+t.getUUID(),link:function(e,t,n,a){e.$watch(function(){return t.html()},function(t){e.title=t}),e.$watch("titleData",function(t,n){a.addTd(e)})}}}]),APP.directive("appTabs",["$timeout","uuid","$log",function(e,t,n){return{restrict:"EA",transclude:!0,scope:{clazz:"@class",style:"@",defaultPanel:"@"},templateUrl:"script/common/directive/tabs/tab.html?t="+t.getUUID(),controller:["$scope",function(e){var t=e.scopes=[];e.clickTtile=function(e){angular.isFunction(e.callback)&&e.callback()},e.select=function(e){e&&(angular.forEach(t,function(e){e.selected=!1}),e.selected=!0)},this.removeScope=function(n){for(var a=t.length-1;a>=0;a--)t[a].selected=!1,t[a].uuid==n.uuid&&t.splice(a,1);0!=t.length&&e.select(t[0])},this.addScope=function(n){for(var a=!1,o=0;o<t.length;o++)t[o].uuid==n.uuid&&(a=!0);a||(e.defaultPanel&&t.length==e.defaultPanel?e.select(n):0===t.length&&e.select(n),t.push(n),e.width=100/t.length+"%")}}],link:function(e,t,n,a){}}}]),APP.directive("appPanel",["$timeout","uuid","$compile",function(e,t,n){return{restrict:"EA",scope:{tittle:"@",callback:"&appClick",showed:"@"},replace:!1,transclude:!0,require:"^appTabs",templateUrl:"script/common/directive/tabs/panel.html?t="+t.getUUID(),link:function(e,n,a,o){angular.isDefined(e.uuid)||(e.uuid=t.getUUID()),angular.isDefined(e.showed)||(e.showed=!0),e.$watch("showed",function(t,n){!!t&"false"!=t?o.addScope(e):o.removeScope(e)})}}}]),APP.directive("appPanelLazy",["$timeout","uuid",function(e,t){return{restrict:"EA",scope:{tittle:"@",callback:"&appClick",showed:"@"},replace:!1,transclude:!0,require:"^appTabs",templateUrl:"script/common/directive/tabs/panelLazy.html?t="+t.getUUID(),link:function(e,n,a,o){angular.isDefined(e.uuid)||(e.uuid=t.getUUID()),angular.isDefined(e.showed)||(e.showed=!0),e.$watch("showed",function(t,n){t&&"false"!=t?o.addScope(e):o.removeScope(e)})}}}]),APP.directive("appVerticalCard",["$timeout","uuid",function(e,t){return{templateUrl:"script/common/directive/verticalCard/verticalCard.html?t="+t.getUUID(),scope:{height:"@",style:"@",clazz:"@class"},transclude:!0,restrict:"E",controller:["$scope",function(e){}],link:function(e,t,n,a){e.height||(e.height="28px")}}}]),APP.filter("thousands",[function(){return function(e,t){t=t||2;var n=function(e){e=String(e).replace(",","");var n=parseFloat(e);isNaN(n)&&(n="0");for(var a="1",o=0;o<t;o++)a+="0";var r=(n=Math.round(e*a)/a).toString(),i=r.indexOf(".");for(i<0&&(i=r.length,r+=".");r.length<=i+parseInt(t);)r+="0";return r}(e).replace(/\d{1,3}(?=(\d{3})+(\.\d*)?$)/g,"$&,");return n=n.split(".")[0]+"."+n.split(".")[1].replace(",","")}}]),APP.controller("selectOrgsCtrl",["$rootScope","$scope","$compile","$timeout","$loading","$log","$appHttp","localStorageService","userInfo","$state",function(e,t,n,a,o,r,i,l,s,c){t.initTemplateList=function(){t.message="正在请求我的模板列表";var e=!1;i.getData({url:"/CommonPlatform/customBaseInfo!getEnterpriseListByUserID.action",params:{userID:l.get(s.userID)},before:function(){o.start("orgList")}}).then(function(e){var n=e.data;t.organizations=n}).catch(function(n){e=!0,t.message="加载失败",r.error(n)}).finally(function(){e?a(function(){o.finish("orgList")},2e3):o.finish("orgList")})}}]),APP.controller("mainCtrl",["$scope","$timeout","$appHttp","cache","$log","$loading",function(e,t,n,a,o,r){e.req4=function(){n.getDataByGet({url:"/data/aa.json"}).then(function(e){var t=e.data,n=[];for(var a in t)"swift_number"!=a&&"code"!=a&&"flag_specialList_c"!=a&&n.push(a);console.log(n)})},e.req3=function(){n.getDataByGet({url:"/data/def.json"}).then(function(e){console.log(e);var t,n=e.data,a={},o=/^td_id_[a-zA-Z|\-|_]+/,r=[];for(var i in n)o.test(i)&&(a[i]=n[i]);if(a.td_id_total_allnum){for(var l=parseInt(a.td_id_total_allnum),s=0;s<l;s++){t=s<10?new RegExp("^td_id_0"+(s+1)+"_*"):new RegExp("^td_id_"+(s+1)+"_*");var c={};for(var i in n)t.test(i)&&(c[i]=n[i]);r.push(c)}console.log(r)}})},e.req2=function(){n.getDataByGet({url:"http://120.24.175.12:8189/dataplatform/brdata/getdata?intCode=Execution&intUserproperty={%22id%22:%2244080419711006165X%22,%22cell%22:%2213922446678%22,%22name%22:%22%E9%99%88%E8%BF%85%22}&droseakey=8fa4d9fac0844625b155d088899ad07b"}).then(function(e){if("200"==e.data.result){var t=JSON.parse(e.data.data),n={},a={},o=/^ex_execut1_*/gi,r=/^ex_bad1_*/gi;for(var i in t)o.test(i)&&(n[i]=t[i]),r.test(i)&&(a[i]=t[i]);console.log(n),console.log(a)}}).catch(function(e){console.log(e)})},e.req=function(){n.getDataByGet({params:{},url:"/data/abc.json"}).then(function(e){if("200"==e.data.result){var t=[],n=JSON.parse(e.data.data);if(n.product&&n.product.priskChecks&&!!n.product.priskChecks.length>0)for(var a=n.product.priskChecks,o=0;o<a.length;o++)if(a[o].caseDetail)if(Array.isArray(a[o].caseDetail))for(var r=0;r<a[o].caseDetail.length;r++){var i=a[o].caseDetail[r];t.push({caseSource:i.caseSource["#text"],caseTime:i.caseTime["#text"],caseType:i.caseType["#text"]})}else t.push({caseSource:a[0].caseDetail.caseSource["#text"],caseTime:a[0].caseDetail.caseTime["#text"],caseType:a[0].caseDetail.caseType["#text"]});console.log(t)}}).catch(function(e){console.log(e)})},r.start("loadname"),t(function(){r.finish("loadname")},2e3),e.html="<div app-color default-color=\"blue\" negative-color='red' target='{{person.age}}'>{{person.name}}</div>",e.person={name:"张三",age:-1},t(function(){o.info("info")},0),e.params={page:4},e.money=4544444444444444,e.handler=function(){return function(t,n){n.flag=t.data.object.hasMoreData,e.items.push(t.data.object.data)}},e.name="jsdf",e.scrollbarConfig={setHeight:200},e.items=["张三"];for(var i=0;i<30;i++)e.items.push("lisi"+i);e.showBgPanel=!1,e.mydate="2017",e.add=function(){e.aaa="2342423",n.getDataByGet("data/data.json").then(function(o){return a.put("a","aa"),t(function(){e.$digest(),e.$apply(function(){e.data+=o})},0),n.getDataByGet("data/test.json")}).then(function(t){console.log(t),e.items.push(t)}).catch(function(e){console.log(e)}).finally(function(){console.log("请求结束")})}}]),APP.controller("organizationCtrl",["$scope","$timeout","$appHttp","cache","$log","$loading","$rootScope","userInfo","localStorageService","$state","uuid",function(e,t,n,a,o,r,i,l,s,c,p){e.init=function(){e.message="正在加载中",t(function(){var a=!1;n.getData({url:"/CommonPlatform/customBaseInfo!getEnterpriseListByUserID.action",params:{userID:s.get(l.userID)},before:function(){r.start("myOrganization")}}).then(function(t){var n=t.data;e.organizations=n}).catch(function(t){a=!0,e.message="加载失败",o.error(t)}).finally(function(){a?t(function(){r.finish("myOrganization")},2e3):r.finish("myOrganization")})},0)},e.clickAddBtn=function(){alert(12334534)},e.workset=function(){e.message="abcdd",o.info(e.message),n.getData({url:"CommonPlatform/customBaseInfo!getEnterpriseInfo.action",params:{createUserId:"102"},enableCache:!0}).then(function(e){o.info(e)}).finally(function(){})}}]),APP.controller("myTemplateCtrl",["$rootScope","$scope","$compile","$timeout","$loading","$log","$appHttp","localStorageService","userInfo","$state","tree",function(e,t,n,a,o,r,i,l,s,c,p){e.$stateParams.entId&&l.set("home.myTemplateIndex.entId",e.$stateParams.entId),e.$stateParams.enterpriseName&&l.set("home.myTemplateIndex.enterpriseName",e.$stateParams.enterpriseName),t.$on("addMainTemplateFinish",function(e){t.initTemplateList()}),t.gotoIndex=function(e){c.go("home.myTemplateIndex")},t.gotoAddMainTemplate=function(){c.go("home.myTemplate.addMainTemplate")},t.initTemplateList=function(){t.message="正在请求我的模板列表";var e=!1;i.getData({url:"/CommonPlatform/templateConfig!getTemplateTree.action",params:{createUserId:l.get(s.userID),entId:l.get("home.myTemplateIndex.entId")},before:function(){o.start("templateList")}}).then(function(e){var n=e.data;p.init("tree-root"),p.addLevel(n.rows,"subTemps"),t.menuData=n.rows}).catch(function(n){e=!0,t.message="加载失败",r.error(n)}).finally(function(){e?a(function(){o.finish("templateList")},2e3):o.finish("templateList")})}}]),APP.controller("userInfoCtrl",["$rootScope","$scope","$timeout","localStorageService","$loading","$appHttp","userInfo","$log",function(e,t,n,a,o,r,i,l){t.close=function(){alert(1)},t.submit=function(){t.message="正在加载中";r.getData({url:"CommonPlatform/customUserInfo!modify.action",params:{userID:a.get(i.userID),userName:t.data.userName,nickName:t.data.nickName,autograph:t.data.autograph,mobilePhone:t.data.mobilePhone,eMail:t.data.eMail,addressLocation:t.data.addressLocation,headImage:t.data.headImage,twoDimensionCode:t.data.twoDimensionCode,remark:t.data.remark,hisheadImage:t.data.hisheadImage},before:function(){o.start("userInfo")}}).then(function(e){e&&"success"==e.data?t.message="保存成功":t.message=e.data}).catch(function(e){t.message="保存失败"}).finally(function(){n(function(){o.finish("userInfo")},2e3)})},t.init=function(){n(function(){t.message="正在加载中";var e=!1;r.getData({url:"CommonPlatform/customUserInfo!select.action",params:{userID:a.get(i.userID)},before:function(){o.start("userInfo")}}).then(function(e){t.data=e.data}).catch(function(n){e=!0,t.message="加载失败",l.error(n)}).finally(function(){e?n(function(){o.finish("userInfo")},2e3):o.finish("userInfo")})},0)}}]),APP.controller("userSetCtrl",["$rootScope","$scope","$timeout","localStorageService","$loading","$appHttp","userInfo","$log",function(e,t,n,a,o,r,i,l){t.items=[];for(var s=0;s<100;s++)t.items.push({name:"jack"+s});t.passwordPanelInit=function(){t.oldPassword=a.get(i.password),t.userSetForm={}},t.changePassword=function(){t.message="正在修改密码，请稍候",r.getData({url:"CommonPlatform/customUserConfig!changePassword.action",params:{userID:a.get(i.userID),password:a.get(i.password),newPassword:t.userSetForm.newPassword},before:function(){o.start("userSet")}}).then(function(e){e&&"success"==e.data?(t.message="修改成功",a.set(i.password,t.userSetForm.newPassword)):t.message="修改失败,失败原因:"+e.data}).catch(function(e){t.message="修改失败,错误原因:"+e}).finally(function(){n(function(){o.finish("userSet")},2e3)})},t.close=function(){alert(1)},t.tbConfig=[{label:"序号",style:"width:50px; border-right: 1px solid black"},{label:"姓名",style:""},{label:"用户名",style:""},{label:"职务",style:""},{label:"角色",style:""},{label:"移动电话",style:""},{label:"电子邮件",style:""},{label:"账户状态",style:""},{label:"备注",style:""},{label:"操作",style:"width:100px;border-left:1px solid black"}]}]),APP.controller("organizationRightCtrl",["$rootScope","$scope","$appHttp","$log","localStorageService","userInfo","$loading","$timeout",function(e,t,n,a,o,r,i,l){$.extend(t,e.$stateParams);var s=[],c=[];t.tbConfig=[{label:"序号",style:"width:50px; border-right: 1px solid black"},{label:"姓名"},{label:"用户名"},{label:"职务"},{label:"角色"},{label:"移动电话"},{label:"电子邮件"},{label:"账户状态"},{label:"备注"},{label:"操作",style:"width:100px;border-left:1px solid black"}],t.init=function(){var s=!1;n.getData({url:"/CommonPlatform/enterpriseGroupConfig!getGroupByentId.action",params:{entId:t.entId},before:function(){t.message="加载中",i.start("organizationDetail")}}).then(function(n){e.$stateParams.createUserId==o.get(r.userID)?t.isAdmin=!0:t.isAdmin=!1,t.groups=n.data.groups,t.users=n.data.users}).catch(function(e){s=!0,t.message="获取数据失败",a.error(e)}).finally(function(){s?l(function(){i.finish("organizationDetail")},2e3):i.finish("organizationDetail")})},t.clickOrgManager=function(){},t.clickDepartment=function(e,o){var r=!1;n.getData({url:"/CommonPlatform/enterpriseGroupConfig!getGroupAndUser.action",params:{entId:t.entId,fid:o},before:function(){s.push($.clone(t.groups)),c.push($.clone(t.users)),t.message="加载中",i.start("organizationDetail")}}).then(function(e){t.groups=e.data.groups,t.users=e.data.users}).catch(function(e){r=!0,t.message="获取数据失败",s.pop(),c.pop(),a.error(e)}).finally(function(){r?l(function(){i.finish("organizationDetail")},2e3):i.finish("organizationDetail")})},t.getPreviousData=function(){s.length>0&&(t.groups=s.pop()),c.length>0&&(t.users=c.pop())};var p=[];t.tbConfig_workset=[{label:"序号",style:"width:50px; border-right: 1px solid black"},{label:"提醒事项"},{label:"基准时间"},{label:"提醒时间"},{label:"提醒内容配置"},{label:"发送到"},{label:"操作",style:"width:50px; border-left:1px solid black"}],t.clickWorkset=function(){if(!t.clickWorksetCnt){var e=!1;n.getData({url:"/CommonPlatform/enterprisemenuConfig!select.action",params:{entId:t.entId},before:function(){t.message="加载中",i.start("organizationDetail")}}).then(function(e){t.jobClassification=e.data,t.clickWorksetCnt=1,p.push({menuName:"工作分类("+t.jobClassification.total+")"}),t.worksetDetailList=p}).catch(function(n){e=!0,t.message="获取数据失败",a.error(n)}).finally(function(){e?l(function(){i.finish("organizationDetail")},2e3):i.finish("organizationDetail")})}},t.clickWorksetDetail=function(){t.firstClickWorksetDetail||(t.worksetDetailList=t.jobClassification.rows)},t.workset_previous=function(){t.worksetDetailList=p},t.clickBaseData=function(){}}]),APP.controller("addMainTemplateCtrl",["$rootScope","$scope","$timeout","$loading","$log","$appHttp","localStorageService","userInfo","templateMainType","$state",function(e,t,n,a,o,r,i,l,s,c){t.templateMainTypes=s,t.form={},o.info(t.entId),t.submit=function(){t.message="正在创建主模板";var e=!1,s=[];angular.isDefined(t.form.card1)&&s.unshift({createUserId:t.createUserId,templateId:"",typeCardName:t.form.card1,typeCardType:"1",viewOrder:"0"}),angular.isDefined(t.form.card2)&&s.unshift({createUserId:t.createUserId,templateId:"",typeCardName:t.form.card2,typeCardType:"1",viewOrder:"0"}),angular.isDefined(t.form.card3)&&s.unshift({createUserId:t.createUserId,templateId:"",typeCardName:t.form.card3,typeCardType:"1",viewOrder:"0"}),angular.isDefined(t.form.card4)&&s.unshift({createUserId:t.createUserId,templateId:"",typeCardName:t.form.card4,typeCardType:"1",viewOrder:"0"}),r.getData({params:{templateId:"",templateMainType:t.form.mainType,templateName:t.form.templateName,templateDesc:t.form.templateDesc,entId:i.get("home.myTemplateIndex.entId"),createUserId:i.get(l.userID),viewOrder:"0",isindia:"0",initIsindiaTypeCard:"0",typeCardsJson:JSON.stringify(s)},url:"/CommonPlatform/templateConfig!addTempAndTypeCard.action",before:function(){a.start("addMainTemplate")}}).then(function(n){var a=n.data;t.message="添加成功",a.result||(e=!0,t.message="添加失败"),t.$emit("addMainTemplateFinish"),c.go("home.myTemplate.previewMainTemplate",{templateId:a.data,templateName:t.form.templateName})}).catch(function(t){e=!0,o.error(t)}).finally(function(){n(function(){a.finish("addMainTemplate")},1e3)})}}]),APP.controller("previewMainTemplateCtrl",["$rootScope","$scope","$timeout","$loading","$log","$appHttp","localStorageService","userInfo","templateMainType","buildVerticalCardConstant",function(e,t,n,a,o,r,i,l,s,c){function p(){var t=0;if(e.currentTypeCard&&e.currentTypeCard.cardElements){for(var n=0;n<e.currentTypeCard.cardElements.length;n++){var a=e.currentTypeCard.cardElements[n];a.viewOrder>t&&(t=a.viewOrder)}e.maxViewOrder=t}}$.extend(t,e.$stateParams),e.currentTemplateId=t.templateId,e.currentTypeCard={},e.currentTypeCardIndex=-1,e.maxViewOrder=0,t.defaultPanel=0,t.$on("files",function(e,t){o.info(e),o.info(t)}),t.init=function(){t.message="正在加载模板";var i=!0;r.getData({params:{templateId:e.currentTemplateId},before:function(){a.start("previewMainTemplate")},url:"/CommonPlatform/templateConfig!showTemp.action"}).then(function(a){var o=a.data;(i=o.result)&&n(function(){t.$apply(function(){if(e.preViewData)for(var t=0;t<e.preViewData.typeCards.length;t++)e.preViewData.typeCards[t].showed=!1;n(function(){for(var t=o.data,n=0;n<t.typeCards.length;n++)t.typeCards[n].showed=!0;e.preViewData=t,e.currentTypeCard=e.preViewData.typeCards[0],e.currentTypeCardIndex=0,p()},0)})},0)}).catch(function(e){o.error(e),$message="加载失败",i=!1}).finally(function(){i?a.finish("previewMainTemplate"):n(function(){a.finish("previewMainTemplate")},2e3)})},t.selectTypeCard=function(n,a){e.currentTypeCard=n,e.currentTypeCardIndex=a,t.defaultPanel=a,p(),o.info(e.currentTypeCard)},t.handler=function(e){var t=c,n=e.cardElements,a="";if(n)for(var o=0;o<n.length;o++){var r=n[o];switch(r.cardElementType){case 0:a+='\n                <app-vertical-card\n                  style="\n                    color:'+r.fontColor+";\n                    "+t.isBold[r.isBold].style+";\n                    "+t.descPosition[r.descPosition].style+'">\n                  '+r.cardElementName+"\n                </app-vertical-card>";break;case 1:break;case 2:var i=void 0;switch(r.percentage){case 0:i="";break;case 1:i="%"}switch(r.thousands){case 0:a+='\n\t\t\t\t\t            <app-input title="'+r.cardElementName+'">\n\t\t\t                  <input type="text" placeholder="'+r.cardElementDesc+'" />\n\t\t\t                  <div class="w-50 f-r">'+i+" "+r.units+"</div>\n\t\t\t                </app-input>\n\t\t\t\t\t          ";break;case 1:a+='\n\t\t\t\t\t            <app-input title="'+r.cardElementName+'">\n\t\t\t                  <input  class="w-40" type="text" placeholder="'+r.cardElementDesc+'" ng-model="Number" app-currency bit="'+r.decimalDigits+'"/>\t \n\t\t\t                  <div class="w-50 f-r">'+i+" "+r.units+"</div>\n\t\t\t                </app-input>\n\t\t\t\t\t          "}break;case 3:a+="\n              \t\t<dropsea-select multiple='"+(1==r.selectType?"":"multiple")+"' select-url="+r.selectURL+"></dropsea-select>\n              \t";break;case 4:switch(r.dateType){case 1:l="YYYY-MM-DD HH:mm";break;case 2:l="YYYY-MM-DD";break;case 3:l="HH:mm"}a+='\n\t                <app-input title="'+r.cardElementName+'">\n\t                  <input type="text" placeholder="'+r.cardElementDesc+'" readonly ng-model="buildData"  moment-picker="buildData" format="'+void 0+'">\n\t                </app-input>\n                ';case 5:var l=void 0;switch(r.dateType){case 1:l="YYYY-MM-DD HH:mm";break;case 2:l="YYYY-MM-DD";break;case 3:l="HH:mm"}a+='\n                <app-input title="'+r.beginDateName+'">\n                  <input type="text" placeholder="'+r.cardElementDesc+'" readonly ng-model="beginDate"  moment-picker="beginDate" format="'+l+'">\n                </app-input>\n                <app-input title="'+r.endDateName+'">\n                  <input type="text" placeholder="'+r.cardElementDesc+'" readonly ng-model="endDate"  moment-picker="endDate" format="'+l+'">\n                </app-input>\n              ';break;case 6:break;case 7:a+='\n\t\t                <app-detail name="'+r.cardElementName+'"></app-detail>             \n\t\t\t            '}}return a},e.hasCardElementAttribute=function(e,t){if(e)for(var n=0;n<e.length;n++)if(e[n].type==t)return!0;return!1},e.refreshTemplateData=function(){t.message="正在加载模板";var i=!0;r.getData({params:{templateId:e.currentTemplateId},before:function(){a.start("previewMainTemplate")},url:"/CommonPlatform/templateConfig!showTemp.action"}).then(function(a){var o=a.data;(i=o.result)&&n(function(){t.$apply(function(){for(var t=0;t<e.preViewData.typeCards.length;t++)e.preViewData.typeCards[t].showed=!1;n(function(){e.preViewData=o.data;for(var t=0;t<e.preViewData.typeCards.length;t++)e.preViewData.typeCards[t].showed=!0;e.currentTypeCard=e.preViewData.typeCards[e.currentTypeCardIndex],p()},0)})},0)}).catch(function(e){o.error(e),$message="加载失败",i=!1}).finally(function(){i?a.finish("previewMainTemplate"):n(function(){a.finish("previewMainTemplate")},2e3)})}}]),APP.factory("selectInstance",function(){return{header:null,type:null,data:null}}),APP.controller("buildDateIntervalCtrl",["$rootScope","$scope","$timeout","$loading","$log","$appHttp","localStorageService","userInfo","templateMainType","buildDateIntervalConstant","positionConstant",function(e,t,n,a,o,r,i,l,s,c,p){$.extend(t,e.$stateParams),t.form={},t.buildDateIntervalConstant=c,t.positionConstant=p,t.cancel=function(){t.closeThisDialog("取消")},t.save=function(){for(var s=!1,c=[],p=0;p<t.form.cardElementAttribute.length;p++){var d=t.form.cardElementAttribute[p];c.push(d.type)}r.getData({params:{typeCardId:e.currentTypeCard.typeCardId,cardElementType:"5",cardElementAttribute:c,cardElementExplain:"",cardElementExplainShowFlag:"",createUserId:i.get(l.userID),viewOrder:parseInt(e.maxViewOrder)+100,cardElementName:"",cardElementDesc:t.form.cardElementDesc,position:e.hasCardElementAttribute(t.form.cardElementAttribute,3)?t.form.position.type:"",beginDateName:t.form.beginDateName,endDateName:t.form.endDateName,dateType:t.form.dateType.type,isAlert:t.form.isAlert.type},url:"/CommonPlatform/cardElementConfig!add.action",before:function(){t.message="正在保存",a.start("buildDateInterval")}}).then(function(n){n.data.result?(t.message="请求成功",t.cancel(),e.refreshTemplateData()):(t.message="请求失败",s=!0)}).catch(function(e){s=!0,t.message=e,o.error(e)}).finally(function(){s?n(function(){a.finish("buildDateInterval")},2e3):n(function(){a.finish("buildDateInterval")},1e3)})}}]),APP.controller("buildDateCtrl",["$rootScope","$scope","$timeout","$loading","$log","$appHttp","localStorageService","userInfo","templateMainType","buildDateIntervalConstant","positionConstant",function(e,t,n,a,o,r,i,l,s,c,p){$.extend(t,e.$stateParams),t.form={},t.buildDateIntervalConstant=c,t.positionConstant=p,t.cancel=function(){t.closeThisDialog("取消")},t.save=function(){for(var o=!1,s=[],c=0;c<t.form.cardElementAttribute.length;c++){var p=t.form.cardElementAttribute[c];s.push(p.type)}r.getData({params:{typeCardId:e.currentTypeCard.typeCardId,cardElementType:"4",cardElementAttribute:s,cardElementExplain:"",cardElementExplainShowFlag:"",createUserId:i.get(l.userID),viewOrder:parseInt(e.maxViewOrder)+100,cardElementName:t.form.cardElementName,cardElementDesc:t.form.cardElementDesc,position:e.hasCardElementAttribute(t.form.cardElementAttribute,3)?t.form.position.type:"",dateType:t.form.dateType.type,isAlert:t.form.isAlert.type},url:"/CommonPlatform/cardElementConfig!add.action",before:function(){t.message="正在保存",a.start("buildDate")}}).then(function(n){n.data.result?(t.message="请求成功",t.cancel(),e.refreshTemplateData()):(t.message="请求失败",o=!0)}).catch(function(e){o=!0,t.message=e}).finally(function(){o?n(function(){a.finish("buildDate")},2e3):n(function(){a.finish("buildDate")},1e3)})}}]),APP.controller("buildDetailCtrl",["$rootScope","$scope","$timeout","$loading","$log","$appHttp","localStorageService","userInfo","templateMainType","buildDetailConstant","positionConstant",function(e,t,n,a,o,r,i,l,s,c,p){$.extend(t,e.$stateParams),t.form={},t.buildDetailConstant=c,t.positionConstant=p,console.log(t.name),t.cancel=function(){t.closeThisDialog("取消")},t.save=function(){for(var s=!1,c=[],p=0;p<t.form.cardElementAttribute.length;p++){var d=t.form.cardElementAttribute[p];c.push(d.type)}r.getData({params:{typeCardId:e.currentTypeCard.typeCardId,cardElementType:"7",cardElementAttribute:c,cardElementExplain:"",cardElementExplainShowFlag:"",createUserId:i.get(l.userID),viewOrder:parseInt(e.maxViewOrder)+100,cardElementName:t.form.cardElementName,cardElementDesc:t.form.cardElementDesc,busTypeCardElementId:"",isBusType:t.form.isBusType.type},url:"/CommonPlatform/cardElementConfig!add.action",before:function(){t.message="正在保存",a.start("buildDetail")}}).then(function(n){n.data.result?(t.message="请求成功",t.cancel(),e.refreshTemplateData()):(t.message="请求失败",s=!0)}).catch(function(e){s=!0,t.message=e,o.error(e)}).finally(function(){s?n(function(){a.finish("buildDetail")},2e3):n(function(){a.finish("buildDetail")},1e3)})}}]),APP.controller("buildSelectCtrl",["$rootScope","$scope","$timeout","$loading","$log","$appHttp","localStorageService","userInfo","templateMainType","buildSelectConstant","positionConstant","ngDialog","selectInstance",function(e,t,n,a,o,r,i,l,s,c,p,d,u){$.extend(t,e.$stateParams),t.form={},t.positionConstant=p,t.buildSelectConstant=c,t.cancel=function(){t.closeThisDialog("取消")},t.$watch("form.textType",function(e,l){if(t.showType1=!1,e)if("1"==e.type){t.showType1=!0,t.showType2=!1;var s=[];r.getData({params:{entid:i.get("home.myTemplateIndex.entId"),fid:0},url:"/CommonPlatform/customBaseInfo!getEntSelectListbyFid.action",before:function(){t.message="正在获取基础数据",a.start("buildText")}}).then(function(e){t.message="获取基础数据成功";var n=e.data;if(n.length>0)for(var a=0;a<n.length;a++)s.push({name:n[a].dicinfo,type:n[a].id})}).catch(function(e){t.message="获取失败",o.error(e),e=!0}).finally(function(){t.baseData=s,n(function(){a.finish("buildText")},500)})}else"2"==e.type?(t.showType1=!1,t.showType2=!0):"3"==e.type&&(t.showType2=!1,t.showType1=!1)}),t.$watch("form.baseData",function(e,t){if(e){u.type="url";var n=i.get("home.myTemplateIndex.entId");u.data="customBaseInfo!getEntSelectListbyFid.action?fid="+e.type+"&entid="+n}}),t.$watch("form.depUserType",function(e,t){e&&("101"==e.type?(u.header="选择部门",u.type="group"):"102"==e.type&&(u.header="选择人员",u.type="user"),d.open({template:"script/platform/component/home/myTemplate/right/mainTemplate/previewMainTemplate/buildSelect/userAndGroupList/list.html",controller:"depUserListCtrl",className:"ngdialog-theme-plain",showClose:!1,closeByDocument:!1,closeByEscape:!0,width:"600"}))}),t.getDepUser=function(){return[{name:"部门",type:"101"},{name:"人员",type:"102"}]},t.save=function(){for(var s=!1,c=[],p=0;p<t.form.cardElementAttribute.length;p++){var d=t.form.cardElementAttribute[p];c.push(d.type)}var m={type:u.type,data:u.data,name:t.form.cardElementName};r.getData({url:"/CommonPlatform/cardElementConfig!add.action",params:{typeCardId:e.currentTypeCard.typeCardId,cardElementType:"3",cardElementName:t.form.cardElementName,createUserId:i.get(l.userID),viewOrder:parseInt(e.maxViewOrder)+100,position:e.hasCardElementAttribute(t.form.cardElementAttribute,3)?t.form.position.type:"",cardElementAttribute:c,cardElementDesc:t.form.cardElementDesc?t.form.cardElementDesc:"",cardElementExplainShowFlag:"",cardElementExplain:"",selectURL:JSON.stringify(m),selectType:t.form.selectType.type},before:function(){t.message="正在保存",a.start("buildSelect")}}).then(function(e){e.data.result?(t.message="保存成功",t.cancel()):t.message=e.data.data}).catch(function(e){s=!0,t.message="加载失败",o.error(e)}).finally(function(){s?n(function(){a.finish("buildSelect")},2e3):n(function(){a.finish("buildSelect")},1e3)})}}]),APP.controller("buildNumberCtrl",["$rootScope","$scope","$timeout","$loading","$log","$appHttp","localStorageService","userInfo","templateMainType","buildNumberConstant","positionConstant",function(e,t,n,a,o,r,i,l,s,c,p){$.extend(t,e.$stateParams),t.form={},t.buildNumberConstant=c,t.positionConstant=p,t.cancel=function(){t.closeThisDialog("取消")},t.save=function(){for(var s=!1,c=[],p=0;p<t.form.cardElementAttribute.length;p++){var d=t.form.cardElementAttribute[p];c.push(d.type)}r.getData({url:"/CommonPlatform/cardElementConfig!add.action",params:{typeCardId:e.currentTypeCard.typeCardId,cardElementType:"2",cardElementName:t.form.cardElementName,createUserId:i.get(l.userID),viewOrder:parseInt(e.maxViewOrder)+100,cardElementAttribute:c,cardElementDesc:t.form.cardElementDesc,decimalDigits:t.form.decimalDigits.type,thousands:t.form.thousands.type,percentage:t.form.percentage.type,position:t.form.position.type,cardElementExplainShowFlag:t.form.cardElementExplainShowFlag.type,cardElementExplain:t.form.cardElementExplain,units:t.form.units},before:function(){t.message="正在保存",a.start("buildText")}}).then(function(n){n.data.result?(t.message="保存成功",t.cancel(),console.log("数字请求"),console.log(n),e.refreshTemplateData()):t.message=n.data.data}).catch(function(e){s=!0,t.message="加载失败",o.error(e)}).finally(function(){s?n(function(){a.finish("buildText")},2e3):(t.message="保存成功",n(function(){a.finish("buildText")},1e3))})}}]),APP.controller("buildTextCtrl",["$rootScope","$scope","$timeout","$loading","$log","$appHttp","localStorageService","userInfo","templateMainType","buildTextConstant","positionConstant","cardElementAttributeConstant",function(e,t,n,a,o,r,i,l,s,c,p,d){$.extend(t,e.$stateParams),t.form={},t.buildTextConstant=c,t.positionConstant=p,t.cancel=function(){t.closeThisDialog("取消")},t.save=function(){for(var s=!1,c=[],p=0;p<t.form.cardElementAttribute.length;p++){var d=t.form.cardElementAttribute[p];c.push(d.type)}r.getData({url:"/CommonPlatform/cardElementConfig!add.action",params:{typeCardId:e.currentTypeCard.typeCardId,cardElementType:"1",cardElementName:t.form.cardElementName,createUserId:i.get(l.userID),viewOrder:parseInt(e.maxViewOrder)+100,textType:t.form.textType.type,textRows:t.form.textRows.type,position:e.hasCardElementAttribute(t.form.cardElementAttribute,3)?t.form.position.type:"",cardElementAttribute:c,cardElementDesc:t.form.cardElementDesc,cardElementExplainShowFlag:t.form.cardElementExplainShowFlag.type,cardElementExplain:t.form.cardElementExplain},before:function(){t.message="正在保存",a.start("buildText")}}).then(function(n){n.data.result?(t.message="保存成功",t.cancel(),e.refreshTemplateData()):t.message=n.data.data}).catch(function(e){s=!0,t.message="加载失败",o.error(e)}).finally(function(){s?n(function(){a.finish("buildText")},2e3):n(function(){a.finish("buildText")},1e3)})}}]),APP.controller("buildUploadCtrl",["$rootScope","$scope","$timeout","$loading","$log","$appHttp","localStorageService","userInfo","templateMainType","buildUploadConstant",function(e,t,n,a,o,r,i,l,s,c){t.form={},t.buildUploadConstant=c,console.log(t.buildUploadConstant),t.cancel=function(){t.closeThisDialog()},t.save=function(){var o=!1;r.getData({params:{typeCardId:e.currentTypeCard.typeCardId,cardElementType:"6",cardElementName:t.form.cardElementName,createUserId:i.get(l.userID),viewOrder:parseInt(e.maxViewOrder)+100,position:"",cardElementAttribute:t.form.cardElementAttribute?t.form.cardElementAttribute.type:"",cardElementDesc:t.form.cardElementDesc,cardElementExplainShowFlag:"",cardElementExplain:""},url:"/CommonPlatform/cardElementConfig!add.action",before:function(){t.message="正在加载",a.start("buildUpload")}}).then(function(n){var a=n.data;a.result?(t.message="加载成功",t.cancel(),e.refreshTemplateData()):(t.message="加载失败,错误原因:"+a.data,o=!0)}).catch(function(e){o=!0,t.message="加载失败,错误原因："+e}).finally(function(){o?n(function(){a.finish("buildUpload")},2e3):n(function(){a.finish("buildUpload")},1e3)})}}]),APP.controller("buildVerticalCardCtrl",["$rootScope","$scope","$timeout","$loading","$log","$appHttp","localStorageService","userInfo","templateMainType","buildVerticalCardConstant","colorConstant",function(e,t,n,a,o,r,i,l,s,c,p){t.form={},t.buildVerticalCardConstant=c,t.colorConstant=p,o.info(t.colorConstant),t.init=function(){},t.cancel=function(){t.closeThisDialog("取消")},t.save=function(){var s=!1;o.info(e.maxViewOrder),r.getData({url:"/CommonPlatform/cardElementConfig!add.action",params:{typeCardId:e.currentTypeCard.typeCardId,cardElementType:"0",cardElementName:t.form.cardElementName,cardElementAttribute:"",cardElementDesc:"",cardElementExplain:"",cardElementExplainShowFlag:"",createUserId:i.get(l.userID),viewOrder:parseInt(e.maxViewOrder)+100,position:"",descPosition:t.form.descPosition.type,isBold:t.form.isBold.type,fontColor:t.form.fontColor.type,isPortrait:"1"},before:function(){t.message="正在保存",a.start("buildVerticalCard")}}).then(function(n){n.data.result?(t.message="保存成功",t.cancel(),e.refreshTemplateData()):t.message=n.data.data}).catch(function(e){s=!0,t.message="加载失败",o.error(e)}).finally(function(){s?n(function(){a.finish("buildVerticalCard")},2e3):n(function(){a.finish("buildVerticalCard")},1e3)})}}]),APP.controller("detailInfoCtrl",["$rootScope","$scope","$timeout","$loading","$log","$appHttp","localStorageService","userInfo","templateMainType","buildDetailConstant","positionConstant",function(e,t,n,a,o,r,i,l,s,c,p){$.extend(t,e.$stateParams),t.form={},t.buildDetailConstant=c,t.positionConstant=p,console.log(t.templateName),t.cancel=function(){t.closeThisDialog("取消")},t.save=function(){for(var s=!1,c=[],p=0;p<t.form.cardElementAttribute.length;p++){var d=t.form.cardElementAttribute[p];c.push(d.type)}r.getData({params:{typeCardId:e.currentTypeCard.typeCardId,cardElementType:"7",cardElementAttribute:c,cardElementExplain:"",cardElementExplainShowFlag:"",createUserId:i.get(l.userID),viewOrder:parseInt(e.maxViewOrder)+100,cardElementName:t.form.cardElementName,cardElementDesc:t.form.cardElementDesc,busTypeCardElementId:"",isBusType:t.form.isBusType.type},url:"/CommonPlatform/cardElementConfig!add.action",before:function(){t.message="正在保存",a.start("buildDetail")}}).then(function(n){n.data.result?(t.message="请求成功",t.cancel(),e.refreshTemplateData()):(t.message="请求失败",s=!0)}).catch(function(e){s=!0,t.message=e,o.error(e)}).finally(function(){s?n(function(){a.finish("buildDetail")},2e3):n(function(){a.finish("buildDetail")},1e3)})}}]),APP.controller("depUserListCtrl",["$rootScope","$scope","$timeout","$loading","$log","$appHttp","localStorageService","userInfo","templateMainType","buildSelectConstant","positionConstant","ngDialog","selectInstance",function(e,t,n,a,o,r,i,l,s,c,p,d,u){function m(e){for(var t=0;t<e.length;t++)e[t].check=!1}$.extend(t,u),t.cache=[],t.back=function(){if(0!=t.cache.length){var e=t.cache.pop();m(e.groupList),m(e.userList),t.groupList=e.groupList,t.userList=e.userList}},t.getSubList=function(e,o,l,s,c){var p=!1;t.message="正在请求数据",r.getData({params:{entId:i.get("home.myTemplateIndex.entId"),fid:s},url:"/CommonPlatform/enterpriseGroupConfig!getGroupAndUser.action",before:function(){a.start("buildSelectDevUserList")}}).then(function(e){var n=e.data,a={};a.groupList=$.clone(t.groupList),a.userList=$.clone(t.userList),t.cache.push(a),t.message="获取数据成功",m(n.groups),"user"==t.type&&m(n.users),t.groupList=n.groups,t.userList=n.users}).catch(function(e){console.log(e),p=!0,t.message=e}).finally(function(){p?n(function(){a.finish("buildSelectDevUserList")},2e3):n(function(){a.finish("buildSelectDevUserList")},1e3)})},t.init=function(){var e=!1;t.message="正在请求数据",r.getData({params:{entId:i.get("home.myTemplateIndex.entId")},url:"/CommonPlatform/enterpriseGroupConfig!getGroupByentId.action",before:function(){a.start("buildSelectDevUserList")}}).then(function(e){var n=e.data;t.message="获取数据成功",m(n.groups),"user"==t.type&&m(n.users),t.groupList=n.groups,t.userList=n.users}).catch(function(n){console.log(n),e=!0,t.message=n}).finally(function(){e?n(function(){a.finish("buildSelectDevUserList")},2e3):n(function(){a.finish("buildSelectDevUserList")},1e3)})},t.cancel=function(){t.closeThisDialog("取消")},t.save=function(){u.data=[],"user"==u.type?angular.forEach(t.userList,function(e,t){1==e.check&&u.data.push(e)}):"group"==u.type&&angular.forEach(t.groupList,function(e,t){1==e.check&&u.data.push(e)}),t.closeThisDialog("取消")}}]);